{"version":3,"sources":["webpack:///./src/components/Deliberation/FeedbackPage.js","webpack:///./src/components/Deliberation/QuestionDisplay.js","webpack:///./src/components/Deliberation/ApplicationDisplay.js","webpack:///./src/components/Deliberation/InterviewerView.js","webpack:///./src/components/Deliberation/ApplicantView.js","webpack:///./src/pages/deliberation.js","webpack:///./node_modules/react-bootstrap/esm/Table.js","webpack:///./node_modules/immutability-helper/index.js","webpack:///./src/components/Error.js"],"names":["FeedbackPage","state","showModal","currentApplicationId","currentFeedback","currentName","render","this","props","applications","settings","ApplicantStatus","deliberation","votes","feedback","name","id","allVotes","Object","values","positiveVotes","filter","vote","length","negativeVotes","accepted","style","color","deliberationsOpen","onClick","setState","cursor","flexdirection","Table","bordered","hover","map","application","key","Button","variant","sendResults","Modal","show","onHide","Header","closeButton","Title","Body","Form","Group","controlId","Label","Control","as","rows","value","onChange","e","target","Footer","saveFeedback","Component","withAuthorization","isAdmin","StyledP","styled","p","QuestionDisplay","description","answer","image","scores","interviewers","level","classYear","useState","showDetails","setShowDetails","InterviewersData","Row","entries","i","uid","score","note","Col","QuestionDetails","hasIMG","padding","src","alt","Content","general","marginBottom","ApplicationDisplay","memo","interview","responses","questions","semester","levelConfig","voteApplicant","find","r","levelQuestions","augmentedQuestions","order","forEach","question","q","push","interviewerA","interviewerB","notes","Response","type","flexGrow","width","height","title","response","margin","background","alignItems","justifyContent","sort","a","b","undefined","SidebarBase","ul","theme","palette","darkShades","SidebarItem","li","selected","mainBrand","DetailsDisplay","InterviewerView","_initFirebase","currentApplication","loading","error","display","unsubSettings","unsubApplications","loadData","cachedApplication","JSON","parse","window","localStorage","getItem","firebase","get","then","querySnapshot","docs","doc","data","exists","Promise","resolve","reject","resolveOnce","generalSettings","onSnapshot","interviewedApplicants","setCurrentApplication","setItem","stringify","decision","updatedApplication","cloneDeep","context","update","swal","catch","err","console","applicationId","text","icon","buttons","cancel","visible","confirm","everyoneHasFeedback","reduce","prev","cur","log","batch","firestore","appsWithResult","ref","$set","commit","app","componentDidMount","componentDidUpdate","prevProps","componentWillUnmount","Error","message","Loader","authUser","Sidebar","className","md","fluid","contextType","AuthUserContext","compose","isMember","withFirebase","DataForm","submitFunction","firstName","file","profileIMG","twitter","facebook","github","linkedin","formData","setFormData","validated","setValidated","updateField","noValidate","onSubmit","preventDefault","form","currentTarget","Array","from","querySelectorAll","fileUpload","files","setCustomValidity","size","setFileValidity","checkValidity","stopPropagation","File","accept","fileName","split","required","placeholder","isApplicant","setSettings","setApplication","setLoading","loadedApplication","setLoadedApplication","loadedSettings","setLoadedSettings","setError","useContext","useEffect","settingsUnsub","docSnapshot","applicationUnsub","roles","nonmember","useTwoRoundDeliberations","provisionalMember","user","applicant","upemember","gradYear","delete","navigate","submitData","socials","uploadProfile","put","to","interviewed","confirmed","ResultText","forwardRef","_ref","bsPrefix","striped","borderless","responsive","decoratedBsPrefix","classes","table","createElement","responsiveClass","stringifiable","obj","prototype","toString","call","slice","defineProperty","exports","isProduction","process","invariant","condition","hasOwnProperty","splice","assign","source","getAllKeys","getOwnPropertySymbols","keys","concat","copy","object","isArray","constructor","Map","Set","create","getPrototypeOf","Context","commands","defaultCommands","bind","extend","isEquals","x","y","newContext","set","enumerable","configurable","directive","fn","$spec","_this","spec","$apply","join","nextObject","objectWasNextObject","nextValueForKey","nextObjectValue","$push","invariantPushAndUnshift","$unshift","$splice","originalObject","invariantSplice","invariantSplices","args","apply","_nextObject","invariantSet","$toggle","targets","invariantSpecArray","nextObjectCopy","$unset","_spec","$add","invariantMapOrSet","_a","has","add","$remove","$merge","specValue","original","defaultContext","command","typeOfTarget","default","module"],"mappings":"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","file":"component---src-pages-deliberation-js-e2dab44c3d43362c7785.js","sourcesContent":["import React, { Component } from \"react\";\r\n\r\nimport Button from \"react-bootstrap/Button\";\r\nimport Table from \"react-bootstrap/Table\";\r\nimport Modal from \"react-bootstrap/Modal\";\r\nimport Form from \"react-bootstrap/Form\";\r\n\r\nimport { withAuthorization } from \"upe-react-components\";\r\n\r\nimport { Container } from \"../../styles/global\";\r\nimport { isAdmin } from \"../../util/conditions\";\r\n\r\nclass FeedbackPage extends Component {\r\n  state = {\r\n    showModal: false,\r\n    currentApplicationId: null,\r\n    currentFeedback: \"\",\r\n    currentName: \"\",\r\n  };\r\n\r\n  render() {\r\n    const { applications, settings } = this.props;\r\n    const {\r\n      showModal,\r\n      currentApplicationId,\r\n      currentFeedback,\r\n      currentName,\r\n    } = this.state;\r\n\r\n    const ApplicantStatus = ({\r\n      deliberation: { votes, feedback },\r\n      name,\r\n      id,\r\n    }) => {\r\n      const allVotes = Object.values(votes);\r\n      const positiveVotes = allVotes.filter((vote) => !!vote).length;\r\n      const negativeVotes = allVotes.filter((vote) => !vote).length;\r\n      const accepted = positiveVotes / allVotes.length >= 0.75;\r\n      return (\r\n        <tr>\r\n          <td>{name}</td>\r\n          <td>\r\n            +{positiveVotes}\r\n            /-\r\n            {negativeVotes}\r\n          </td>\r\n          <td style={{ color: accepted ? \"green\" : \"red\" }}>\r\n            {accepted ? \"Accepted\" : \"Not Accepted\"}\r\n          </td>\r\n          {!settings.deliberationsOpen && (\r\n            <>\r\n              {accepted ? (\r\n                <td>N/A</td>\r\n              ) : (\r\n                <td\r\n                  onClick={() =>\r\n                    this.setState({\r\n                      showModal: true,\r\n                      currentApplicationId: id,\r\n                      currentFeedback: feedback,\r\n                      currentName: name,\r\n                    })\r\n                  }\r\n                  style={{ cursor: \"pointer\" }}\r\n                >\r\n                  {feedback === \"\" ? \"Add\" : \"Edit\"} Feedback\r\n                </td>\r\n              )}\r\n            </>\r\n          )}\r\n        </tr>\r\n      );\r\n    };\r\n\r\n    return (\r\n      <Container flexdirection=\"column\">\r\n        <Table bordered hover>\r\n          <thead>\r\n            <tr>\r\n              <th>Name</th>\r\n              <th>Votes</th>\r\n              <th>Status</th>\r\n              {!settings.deliberationsOpen && <th>Feedback</th>}\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {applications.map((application) => (\r\n              <ApplicantStatus key={application.id} {...application} />\r\n            ))}\r\n          </tbody>\r\n        </Table>\r\n\r\n        {!settings.deliberationsOpen && (\r\n          <Button variant=\"danger\" onClick={this.props.sendResults}>\r\n            Send Results\r\n          </Button>\r\n        )}\r\n\r\n        <Modal\r\n          show={showModal}\r\n          onHide={() => this.setState({ showModal: false })}\r\n        >\r\n          <Modal.Header closeButton>\r\n            <Modal.Title>{currentName}</Modal.Title>\r\n          </Modal.Header>\r\n          <Modal.Body>\r\n            <Form>\r\n              <Form.Group controlId=\"exampleForm.ControlTextarea1\">\r\n                <Form.Label>Feedback</Form.Label>\r\n                <Form.Control\r\n                  as=\"textarea\"\r\n                  rows=\"3\"\r\n                  value={currentFeedback}\r\n                  onChange={(e) =>\r\n                    this.setState({ currentFeedback: e.target.value })\r\n                  }\r\n                />\r\n              </Form.Group>\r\n            </Form>\r\n          </Modal.Body>\r\n          <Modal.Footer>\r\n            <Button\r\n              variant=\"secondary\"\r\n              onClick={() => this.setState({ showModal: false })}\r\n            >\r\n              Cancel\r\n            </Button>\r\n            <Button\r\n              variant=\"primary\"\r\n              onClick={() =>\r\n                this.props.saveFeedback(currentApplicationId, currentFeedback)\r\n              }\r\n            >\r\n              Save\r\n            </Button>\r\n          </Modal.Footer>\r\n        </Modal>\r\n      </Container>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withAuthorization(isAdmin)(FeedbackPage);\r\n","import React, { useState } from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nimport Button from \"react-bootstrap/Button\";\r\nimport Col from \"react-bootstrap/Col\";\r\nimport Row from \"react-bootstrap/Row\";\r\n\r\nimport { Container } from \"../../styles/global\";\r\n\r\nconst StyledP = styled.p`\r\n  white-space: pre-wrap;\r\n`;\r\n\r\nconst QuestionDisplay = ({\r\n  id,\r\n  name,\r\n  description,\r\n  answer,\r\n  image,\r\n  scores,\r\n  interviewers,\r\n  level,\r\n  classYear,\r\n}) => {\r\n  const [showDetails, setShowDetails] = useState(false);\r\n\r\n  const InterviewersData = () => {\r\n    return (\r\n      <Row>\r\n        {Object.entries(interviewers).map(([uid, { score, note }], i) => (\r\n          <Col key={uid}>\r\n            <h4>Interviewer {i + 1}</h4>\r\n            <h5>Score</h5>\r\n            <p>{score}</p>\r\n            <h5>Notes</h5>\r\n            <StyledP>{note}</StyledP>\r\n          </Col>\r\n        ))}\r\n      </Row>\r\n    );\r\n  };\r\n\r\n  const QuestionDetails = () => {\r\n    const hasIMG = image !== \"\";\r\n    return (\r\n      <>\r\n        <Col style={{ padding: 0 }}>\r\n          <h4>Description</h4>\r\n          {hasIMG && <img src={image} alt={name} />}\r\n          <StyledP>{description}</StyledP>\r\n        </Col>\r\n        <Col style={{ padding: 0 }}>\r\n          <h4>Answer</h4>\r\n          <StyledP>{answer}</StyledP>\r\n        </Col>\r\n      </>\r\n    );\r\n  };\r\n\r\n  let Content = () => null;\r\n  if (id !== \"resume\" && id !== \"finalNotes\") {\r\n    Content = () => (\r\n      <>\r\n        <Row>\r\n          <Col>\r\n            <h4>General Average</h4>\r\n            <p>{scores?.general || \"N/A\"}</p>\r\n          </Col>\r\n          <Col>\r\n            <h4>Class Average</h4>\r\n            <p>{scores?.[classYear] || \"N/A\"}</p>\r\n          </Col>\r\n          <Col>\r\n            <h4>Level Average</h4>\r\n            <p>{scores?.[level] || \"N/A\"}</p>\r\n          </Col>\r\n        </Row>\r\n\r\n        <Button\r\n          style={{ marginBottom: 20 }}\r\n          onClick={() => setShowDetails(!showDetails)}\r\n        >\r\n          {showDetails ? \"▲ Hide\" : \"▼ Show\"} Details\r\n        </Button>\r\n        {showDetails && <QuestionDetails />}\r\n      </>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Container flexdirection=\"column\">\r\n      <h3>{name}</h3>\r\n      <InterviewersData />\r\n      <Content />\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default QuestionDisplay;\r\n","import React, { Fragment, memo } from \"react\";\r\n\r\nimport Button from \"react-bootstrap/Button\";\r\nimport Row from \"react-bootstrap/Row\";\r\n\r\nimport QuestionDisplay from \"./QuestionDisplay\";\r\nimport { Container } from \"../../styles/global\";\r\n\r\nconst ApplicationDisplay = memo(\r\n  ({\r\n    id,\r\n    vote,\r\n    interview,\r\n    responses,\r\n    name,\r\n    semester,\r\n    questions,\r\n    levelConfig,\r\n    voteApplicant,\r\n  }) => {\r\n    const { level } = interview;\r\n    const classYear = responses.find((r) => r.id === 5).value;\r\n    const levelQuestions = levelConfig[level];\r\n    let augmentedQuestions = [\r\n      {\r\n        id: \"resume\",\r\n        name: \"Resume\",\r\n        order: 0,\r\n      },\r\n      {\r\n        id: \"finalNotes\",\r\n        name: \"Final Notes\",\r\n        order: levelQuestions.length + 1,\r\n      },\r\n    ];\r\n\r\n    levelQuestions.forEach(({ id, order }) => {\r\n      const question = questions.find((q) => q.id === id);\r\n      augmentedQuestions.push({ ...question, order: order + 1 });\r\n    });\r\n\r\n    const interviewers = Object.entries(\r\n      interview.interviewers\r\n    ).map(([uid, name]) => ({ uid, name }));\r\n\r\n    augmentedQuestions = augmentedQuestions.map((question) => {\r\n      const [interviewerA, interviewerB] = interviewers;\r\n      return {\r\n        ...question,\r\n        interviewers: {\r\n          [interviewerA.uid]: {\r\n            score: interview.scores[interviewerA.uid][question.id],\r\n            note: interview.notes[interviewerA.uid][question.id],\r\n          },\r\n          [interviewerB.uid]: {\r\n            score: interview.scores[interviewerB.uid][question.id],\r\n            note: interview.notes[interviewerB.uid][question.id],\r\n          },\r\n        },\r\n      };\r\n    });\r\n\r\n    const Response = ({ type, name, value }) => {\r\n      let Content = () => <p>{value !== \"\" ? value : \"N/A\"}</p>;\r\n      const style = {\r\n        flexGrow: 1,\r\n      };\r\n\r\n      // eslint-disable-next-line default-case\r\n      switch (type) {\r\n        case \"file\":\r\n          style.width = \"100%\";\r\n          Content = () => (\r\n            <embed\r\n              src={value}\r\n              width=\"100%\"\r\n              height=\"500\"\r\n              type=\"application/pdf\"\r\n              title={name}\r\n            />\r\n          );\r\n          break;\r\n        case \"textarea\":\r\n          style.width = \"100%\";\r\n          break;\r\n        case \"yesno\":\r\n          Content = () => <p>{value ? \"Yes\" : \"No\"}</p>;\r\n          break;\r\n      }\r\n\r\n      return (\r\n        <div style={style}>\r\n          <h4>{name}</h4>\r\n          <Content />\r\n        </div>\r\n      );\r\n    };\r\n\r\n    return (\r\n      <Container flexdirection=\"column\">\r\n        <Row>\r\n          <h1>Application Responses</h1>\r\n        </Row>\r\n        <Row>\r\n          {responses.map((response) => (\r\n            <Response key={response.id} {...response} />\r\n          ))}\r\n        </Row>\r\n\r\n        <hr style={{ width: \"100%\", margin: \"30px 0\", background: \"black\" }} />\r\n\r\n        <Row style={{ alignItems: \"center\", justifyContent: \"space-between\" }}>\r\n          <h1>Interview Details</h1>\r\n          <h2>\r\n            Level: <span>{interview.level}</span>\r\n          </h2>\r\n        </Row>\r\n        <Row>\r\n          {augmentedQuestions\r\n            .sort((a, b) => (a.order > b.order ? 1 : -1))\r\n            .map((question, i) => (\r\n              <Fragment key={question.id}>\r\n                <QuestionDisplay\r\n                  level={level}\r\n                  classYear={classYear}\r\n                  {...question}\r\n                />\r\n                {i < augmentedQuestions.length - 1 && (\r\n                  <hr style={{ width: \"100%\", margin: \"30px 0\" }} />\r\n                )}\r\n              </Fragment>\r\n            ))}\r\n        </Row>\r\n\r\n        <hr style={{ width: \"100%\", margin: \"30px 0\", background: \"black\" }} />\r\n\r\n        <Row\r\n          style={{\r\n            alignItems: \"center\",\r\n            justifyContent: \"space-between\",\r\n            marginBottom: 25,\r\n          }}\r\n        >\r\n          <h1>Deliberation</h1>\r\n          <h2>\r\n            {vote !== undefined\r\n              ? `You voted to ${vote ? \"Accept\" : \"Deny\"}!`\r\n              : \"You haven't voted yet!\"}\r\n          </h2>\r\n        </Row>\r\n        <Row\r\n          style={{\r\n            alignItems: \"center\",\r\n            justifyContent: \"space-between\",\r\n            marginBottom: 30,\r\n          }}\r\n        >\r\n          <Button variant=\"success\" onClick={() => voteApplicant(true)}>\r\n            Accept\r\n          </Button>\r\n          <Button variant=\"danger\" onClick={() => voteApplicant(false)}>\r\n            Deny\r\n          </Button>\r\n        </Row>\r\n      </Container>\r\n    );\r\n  }\r\n);\r\n\r\nexport default ApplicationDisplay;\r\n","import React, { Component } from \"react\";\r\nimport { compose } from \"recompose\";\r\nimport swal from \"@sweetalert/with-react\";\r\nimport styled from \"styled-components\";\r\nimport cloneDeep from \"lodash.clonedeep\";\r\nimport update from \"immutability-helper\";\r\n\r\nimport Col from \"react-bootstrap/Col\";\r\n\r\nimport {\r\n  AuthUserContext,\r\n  withFirebase,\r\n  withAuthorization,\r\n} from \"upe-react-components\";\r\n\r\nimport { isMember, isAdmin } from \"../../util/conditions\";\r\nimport Loader from \"../Loader\";\r\nimport Error from \"../Error\";\r\nimport FeedbackPage from \"./FeedbackPage\";\r\nimport ApplicationDisplay from \"./ApplicationDisplay\";\r\nimport { Container, FullSizeContainer } from \"../../styles/global\";\r\n\r\n// TODO: use this to constrcut a Sidebar base in global styles\r\nconst SidebarBase = styled.ul`\r\n  text-align: center;\r\n  width: 100%;\r\n  height: 100%;\r\n  padding: 15px;\r\n  background: ${(props) => props.theme.palette.darkShades};\r\n  list-style: none;\r\n\r\n  h1 {\r\n    color: white;\r\n    font-weight: bold;\r\n    padding-top: 10px;\r\n    padding-bottom: 10px;\r\n    border-bottom: 1px solid grey;\r\n    font-size: 27px;\r\n  }\r\n\r\n  hr {\r\n    border-bottom: 1px solid grey;\r\n  }\r\n`;\r\n\r\nconst SidebarItem = styled.li`\r\n  color: ${(props) =>\r\n    props.selected ? props.theme.palette.mainBrand : \"white\"};\r\n  font-weight: bold;\r\n  padding-top: 10px;\r\n  padding-bottom: 10px;\r\n  cursor: pointer;\r\n\r\n  &:hover {\r\n    color: ${(props) => props.theme.palette.mainBrand};\r\n    text-decoration: underline;\r\n  }\r\n`;\r\n\r\nconst DetailsDisplay = () => (\r\n  <div>\r\n    <h1> Welcome to Deliberations! </h1>\r\n    <p>\r\n      {\" \"}\r\n      Please read the instructions bellow carefully before proceeding to\r\n      deliberate on all the candidates.{\" \"}\r\n    </p>\r\n\r\n    <h3> How to Vote </h3>\r\n    <p>\r\n      {\" \"}\r\n      In order to vote, select one of the candidates from the sidebar, and\r\n      proceed to review their application, in it, you'll be able to see not only\r\n      their general application, but also the details of their interview.{\" \"}\r\n    </p>\r\n    <p>\r\n      {\" \"}\r\n      After reviewing their application, you'll find two buttons at the bottom,\r\n      approve & deny, you only get 1 vote per candidate, although you will be\r\n      able to switch your vote until the deliberations close.{\" \"}\r\n    </p>\r\n\r\n    <h3> Final Details </h3>\r\n    <p>\r\n      {\" \"}\r\n      You will not be able to see anyone else's votes of the final results until\r\n      the EBoard announces them.{\" \"}\r\n    </p>\r\n  </div>\r\n);\r\n\r\nclass InterviewerView extends Component {\r\n  _initFirebase = false;\r\n  state = {\r\n    applications: [], // TODO: instead of loading all the applications by default, load their ids, then pass that id to application display/admin settings so they can handle accordingly\r\n    currentApplication: \"details\",\r\n    settings: null,\r\n    loading: true,\r\n    error: null,\r\n    display: null,\r\n  };\r\n  static contextType = AuthUserContext;\r\n  unsubSettings = null;\r\n  unsubApplications = null;\r\n\r\n  componentDidMount() {\r\n    if (this.props.firebase && !this._initFirebase) this.loadData();\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (this.props.firebase && !this._initFirebase) this.loadData();\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (typeof this.unsubSettings === \"function\") this.unsubSettings();\r\n    if (typeof this.unsubApplications === \"function\") this.unsubApplications();\r\n  }\r\n\r\n  loadData = async () => {\r\n    this._initFirebase = true;\r\n\r\n    const initialApplication = \"details\";\r\n    const cachedApplication = JSON.parse(\r\n      window.localStorage.getItem(\"currentApplicationDeliberation\")\r\n    );\r\n    const currentApplication = cachedApplication || initialApplication;\r\n\r\n    const questions = await this.props.firebase\r\n      .questions()\r\n      .get()\r\n      .then((querySnapshot) =>\r\n        querySnapshot.docs.map((doc) => ({\r\n          ...doc.data(),\r\n          id: doc.id,\r\n        }))\r\n      );\r\n\r\n    const levelConfig = await this.props.firebase\r\n      .levelConfig()\r\n      .get()\r\n      .then((doc) => {\r\n        if (!doc.exists) {\r\n          this.setState({ error: \"LevelConfig does not exist!\" });\r\n          return {};\r\n        }\r\n        return doc.data();\r\n      });\r\n\r\n    const settings = await new Promise((resolve, reject) => {\r\n      let resolveOnce = (doc) => {\r\n        resolveOnce = () => null;\r\n        resolve(doc);\r\n      };\r\n      this.unsubSettings = this.props.firebase\r\n        .generalSettings()\r\n        .onSnapshot((doc) => {\r\n          if (!doc.exists) this.setState({ error: \"Failed to load settings!\" });\r\n          else {\r\n            const settings = doc.data();\r\n            this.setState({ settings });\r\n            resolveOnce(settings);\r\n          }\r\n        }, reject);\r\n    });\r\n\r\n    const applications = await new Promise((resolve, reject) => {\r\n      let resolveOnce = (doc) => {\r\n        resolveOnce = () => null;\r\n        resolve(doc);\r\n      };\r\n      this.unsubApplications = this.props.firebase\r\n        .interviewedApplicants()\r\n        .onSnapshot((querySnapshot) => {\r\n          const applications = querySnapshot.docs.map((doc) => {\r\n            const application = doc.data();\r\n            return {\r\n              id: doc.id,\r\n              ...application,\r\n              name: application.responses.find((r) => r.id === 1).value,\r\n            };\r\n          });\r\n          this.setState({ applications });\r\n          resolveOnce(applications);\r\n\r\n          if (\r\n            typeof currentApplication === \"object\" &&\r\n            currentApplication !== null\r\n          ) {\r\n            this.setCurrentApplication(\r\n              applications.find((a) => a.id === currentApplication.id)\r\n            );\r\n          }\r\n        }, reject);\r\n    });\r\n\r\n    this.setState({\r\n      settings,\r\n      applications,\r\n      questions,\r\n      levelConfig,\r\n      currentApplication,\r\n      loading: false,\r\n    });\r\n  };\r\n\r\n  setCurrentApplication = (currentApplication) => {\r\n    window.localStorage.setItem(\r\n      \"currentApplicationDeliberation\",\r\n      JSON.stringify(currentApplication)\r\n    );\r\n    this.setState({ currentApplication });\r\n  };\r\n\r\n  voteApplicant = (decision) => {\r\n    const { currentApplication } = this.state;\r\n    const updatedApplication = cloneDeep(currentApplication);\r\n    delete updatedApplication.id;\r\n    updatedApplication.deliberation.votes[this.context.uid] = decision;\r\n\r\n    this.props.firebase\r\n      .application(currentApplication.id)\r\n      .update(updatedApplication)\r\n      .then(() =>\r\n        swal(\r\n          \"You voted!\",\r\n          `You chose to ${decision ? \"accept\" : \"deny\"}. Nice.`,\r\n          \"success\"\r\n        )\r\n      )\r\n      .catch((err) => console.error(err));\r\n  };\r\n\r\n  saveFeedback = async (applicationId, feedback) =>\r\n    await this.props.firebase.application(applicationId).update({\r\n      \"deliberation.feedback\": feedback,\r\n    });\r\n\r\n  sendResults = () =>\r\n    swal({\r\n      title: \"Hold up!\",\r\n      text:\r\n        \"If you press Yes, you're going to send emails to all the applicants with their results. If you haven't filled out feedback for everyone, this will be bad!\",\r\n      icon: \"warning\",\r\n      buttons: {\r\n        cancel: {\r\n          text: \"No\",\r\n          value: false,\r\n          visible: true,\r\n        },\r\n        confirm: {\r\n          text: \"Yes\",\r\n          value: true,\r\n          visible: true,\r\n        },\r\n      },\r\n    }).then((confirm) => {\r\n      if (confirm) {\r\n        const everyoneHasFeedback = this.state.applications\r\n          .map(({ deliberation: { feedback, votes } }) => {\r\n            const allVotes = Object.values(votes);\r\n            const positiveVotes = allVotes.filter((vote) => !!vote).length;\r\n            const accepted = positiveVotes / allVotes.length >= 0.75;\r\n            return accepted || feedback !== \"\";\r\n          })\r\n          .reduce((prev, cur) => prev && cur);\r\n\t\t\t\t\r\n\t\t\t\tconsole.log(\"almost there\")\r\n        if (everyoneHasFeedback) {\r\n\t\t\t\t\tconsole.log(\"there\")\r\n          // Update everyone's accepted status\r\n          // Get a new write batch\r\n          const batch = this.props.firebase.firestore.batch();\r\n          const appsWithResult = this.state.applications.map((application) => {\r\n            const {\r\n              id,\r\n              deliberation: { votes },\r\n            } = application;\r\n            const allVotes = Object.values(votes);\r\n            const positiveVotes = allVotes.filter((vote) => !!vote).length;\r\n            const accepted = positiveVotes / allVotes.length >= 0.75;\r\n            if (accepted) {\r\n              const ref = this.props.firebase.application(id);\r\n              batch.update(ref, { \"deliberation.accepted\": false, \"deliberation.votes\": {} });\r\n            }\r\n\r\n            const newApp = update(application, {\r\n              deliberation: { accepted: { $set: accepted } },\r\n            });\r\n\r\n            return newApp;\r\n          });\r\n\r\n          // Commit the batch\r\n          batch.commit().then(() => {\r\n            /* eslint-disable no-unused-vars */\r\n            const accepted = appsWithResult.filter(\r\n              (app) => app.deliberation.accepted\r\n            );\r\n            const denied = appsWithResult.filter(\r\n              (app) => !app.deliberation.accepted\r\n            );\r\n            /* eslint-enable no-unused-vars */\r\n            // send emails here\r\n          });\r\n        } else {\r\n          swal(\r\n            \"Nope\",\r\n            \"Make sure everyone who was denied has feedback!\",\r\n            \"error\"\r\n          );\r\n        }\r\n      }\r\n    });\r\n\r\n  render() {\r\n    const {\r\n      loading,\r\n      error,\r\n      settings,\r\n      applications,\r\n      currentApplication,\r\n      questions,\r\n      levelConfig,\r\n    } = this.state;\r\n\r\n    if (error) return <Error message={error} />;\r\n    if (loading) return <Loader />;\r\n\r\n    const { deliberationsOpen } = this.state.settings;\r\n\r\n    const authUser = this.context;\r\n\r\n    if (!deliberationsOpen && !isAdmin(authUser))\r\n      return (\r\n        <Container flexdirection=\"column\">\r\n          <h1>Deliberations are closed!</h1>\r\n        </Container>\r\n      );\r\n\r\n    let Content;\r\n    if (currentApplication === \"details\") Content = () => <DetailsDisplay />;\r\n    else if (currentApplication === \"admin\") {\r\n      Content = () => (\r\n        <FeedbackPage\r\n          settings={settings}\r\n          applications={applications}\r\n          saveFeedback={this.saveFeedback}\r\n          sendResults={this.sendResults}\r\n        />\r\n      );\r\n    } else\r\n      Content = () => (\r\n        <ApplicationDisplay\r\n          questions={questions}\r\n          levelConfig={levelConfig}\r\n          voteApplicant={this.voteApplicant}\r\n          vote={currentApplication.deliberation.votes[authUser.uid]}\r\n          {...currentApplication}\r\n        />\r\n      );\r\n\r\n    const Sidebar = () => (\r\n      <Col className=\"flex-column\" md={3} style={{ padding: 0 }}>\r\n        <SidebarBase>\r\n          <h1>Applications</h1>\r\n          <SidebarItem\r\n            selected={currentApplication === \"details\"}\r\n            onClick={() => this.setCurrentApplication(\"details\")}\r\n          >\r\n            Voting Instructions\r\n          </SidebarItem>\r\n          {isAdmin(authUser) && (\r\n            <SidebarItem\r\n              selected={currentApplication === \"admin\"}\r\n              onClick={() => this.setCurrentApplication(\"admin\")}\r\n            >\r\n              Add Feedback\r\n            </SidebarItem>\r\n          )}\r\n          <hr />\r\n          {applications\r\n            .sort((a, b) => (a.name > b.name ? 1 : -1))\r\n            .map((application) => (\r\n              <SidebarItem\r\n                selected={currentApplication.id === application.id}\r\n                key={application.id}\r\n                onClick={() => this.setCurrentApplication(application)}\r\n              >\r\n                {application.name}\r\n              </SidebarItem>\r\n            ))}\r\n        </SidebarBase>\r\n      </Col>\r\n    );\r\n\r\n    return (\r\n      <FullSizeContainer fluid flexdirection=\"row\">\r\n        <Sidebar />\r\n        <Col md={9} style={{ padding: 15 }}>\r\n          <Content />\r\n        </Col>\r\n      </FullSizeContainer>\r\n    );\r\n  }\r\n}\r\n\r\nexport default compose(\r\n  withAuthorization(isMember),\r\n  withFirebase\r\n)(InterviewerView);\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\nimport swal from \"@sweetalert/with-react\";\r\nimport { compose } from \"recompose\";\r\nimport cloneDeep from \"lodash.clonedeep\";\r\nimport { Link, navigate } from \"gatsby\";\r\nimport update from \"immutability-helper\";\r\n\r\nimport Form from \"react-bootstrap/Form\";\r\nimport Button from \"react-bootstrap/Button\";\r\n\r\nimport { isApplicant } from \"../../util/conditions\";\r\nimport {\r\n  AuthUserContext,\r\n  withFirebase,\r\n  withAuthorization,\r\n} from \"upe-react-components\";\r\n\r\nimport { Container, RequiredAsterisk } from \"../../styles/global\";\r\nimport Loader from \"../Loader\";\r\nimport Error from \"../Error\";\r\n\r\nconst ApplicantView = ({ firebase }) => {\r\n  const [settings, setSettings] = useState({});\r\n  const [application, setApplication] = useState({});\r\n  const [loading, setLoading] = useState(true);\r\n  const [loadedApplication, setLoadedApplication] = useState(false);\r\n  const [loadedSettings, setLoadedSettings] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  const authUser = useContext(AuthUserContext);\r\n\r\n  useEffect(() => {\r\n    if (firebase && !!authUser) {\r\n      const settingsUnsub = firebase\r\n        .generalSettings()\r\n        .onSnapshot((docSnapshot) => {\r\n          if (docSnapshot.exists) setSettings(docSnapshot.data());\r\n          else setError(\"No Settings!\");\r\n          setLoadedSettings(true);\r\n        });\r\n\r\n      const applicationUnsub = firebase\r\n        .application(authUser.uid)\r\n        .onSnapshot((docSnapshot) => {\r\n          if (docSnapshot.exists) {\r\n            setApplication(docSnapshot.data());\r\n          } else setError(\"No Application!\");\r\n          setLoadedApplication(true);\r\n        });\r\n\r\n      return () => {\r\n        settingsUnsub();\r\n        applicationUnsub();\r\n      };\r\n    }\r\n  }, [firebase, authUser]);\r\n\r\n  useEffect(() => {\r\n    if (loadedSettings && loadedApplication) setLoading(false);\r\n  }, [loadedApplication, loadedSettings]);\r\n\r\n  if (error) return <Error error={error} />;\r\n  if (loading) return <Loader />;\r\n\r\n  const confirm = async () => {\r\n    const roles = cloneDeep(authUser.roles);\r\n    delete roles.nonmember;\r\n    if (\r\n      settings.useTwoRoundDeliberations &&\r\n      !authUser.roles.provisionalMember\r\n    ) {\r\n      roles.provisionalMember = true;\r\n\r\n      await firebase.user(authUser.uid).update({ roles });\r\n      await firebase\r\n        .application(authUser.uid)\r\n        .update({ \"deliberation.confirmed\": true });\r\n    } else {\r\n      delete roles.provisionalMember;\r\n      delete roles.applicant;\r\n      roles.upemember = true;\r\n\r\n      const gradYear = application.responses.find((r) => r.id === 5).value;\r\n\r\n      await firebase.user(authUser.uid).update({ roles, gradYear });\r\n      await firebase.application(authUser.uid).delete();\r\n\r\n      // TODO: make this welcome actually pretty\r\n      await swal(\r\n        \"You're in!\",\r\n        \"Welcome to Upsilon Pi Epsilon at Boston University\",\r\n        \"success\"\r\n      );\r\n      navigate(\"/\");\r\n    }\r\n  };\r\n\r\n  const submitData = async (formData) => {\r\n    if (formData.file === null) return;\r\n\r\n    const data = {\r\n      profileIMG: formData.profileIMG,\r\n      socials: {\r\n        facebook: formData.facebook,\r\n        github: formData.github,\r\n        linkedin: formData.linkedin,\r\n        twitter: formData.twitter,\r\n      },\r\n    };\r\n\r\n    // TODO: refactor along with image url change (keep all user data in storage/userData/UID/)\r\n    await firebase\r\n      .uploadProfile(\"Provisional\", formData.profileIMG)\r\n      .put(formData.file)\r\n      .catch((error) => {\r\n        setError(error);\r\n      });\r\n\r\n    await firebase\r\n      .user(authUser.uid)\r\n      .update(data)\r\n      .catch((error) => {\r\n        setError(error);\r\n      });\r\n\r\n    await swal(\"All set!\", \"We got your info!\", \"success\");\r\n    navigate(\"/\");\r\n  };\r\n\r\n  // Hasn't applied yet\r\n  if (!authUser.roles.applicant)\r\n    return (\r\n      <Container flexdirection=\"column\">\r\n        <h1>You have not yet applied this semester.</h1>\r\n        <Link to=\"/apply\">\r\n          <Button>Apply!</Button>\r\n        </Link>\r\n      </Container>\r\n    );\r\n\r\n  // Hasn't interviewed yet\r\n  if (!application.interview.interviewed)\r\n    return (\r\n      <Container flexdirection=\"column\">\r\n        <h1>You must first complete your interview!</h1>\r\n      </Container>\r\n    );\r\n\r\n  // Deliberations are incomplete or feedback hasn't been given\r\n  if (\r\n    settings.deliberationsOpen ||\r\n    (!application.deliberation.accepted &&\r\n      application.deliberation.feedback === \"\")\r\n  )\r\n    // TODO: make this centered, prettier\r\n    return (\r\n      <Container flexdirection=\"column\">\r\n        <h1>Deliberations are still underway!</h1>\r\n      </Container>\r\n    );\r\n\r\n  // Denied but waiting for emails to go out\r\n  if (\r\n    !application.deliberation.accepted &&\r\n    application.deliberation.feedback !== \"\"\r\n  )\r\n    return (\r\n      <Container flexdirection=\"column\">\r\n        <h1>Keep an eye on your inbox for an update on your deliberation!</h1>\r\n      </Container>\r\n    );\r\n\r\n  // Theyre accepted and need to confirm\r\n  // TODO: get eboard to fix the wording\r\n  if (!application.deliberation.confirmed) {\r\n    const ResultText = () =>\r\n      settings.useTwoRoundDeliberations && !authUser.roles.provisionalMember ? (\r\n        <>\r\n          <h2>You have been provisionally accepted into UPE!</h2>\r\n          <br />\r\n          <p>\r\n            We are pleased to extend to you provisional membership to UPE. This\r\n            means that you are now on the way to becoming a fully fledged member\r\n            of our group. Now you must go through the provisional period\r\n            requirements as described in the info sessions. If you'd like to\r\n            accept this and start your onboarding period, please click the\r\n            button below to confirm.\r\n          </p>\r\n        </>\r\n      ) : (\r\n        <>\r\n          <h2>You have been officially accepted into UPE!</h2>\r\n          <br />\r\n          <p>\r\n            We are pleased to announce that you have been officially accepted\r\n            into UPE. In order for us to complete this process, we require that\r\n            you confirm your acceptance by clicking below.\r\n          </p>\r\n        </>\r\n      );\r\n\r\n    return (\r\n      <Container flexdirection=\"column\">\r\n        <div>\r\n          <h1>Your Results</h1>\r\n        </div>\r\n        <br />\r\n        <div>\r\n          <ResultText />\r\n          <Button onClick={confirm}>Confirm</Button>\r\n        </div>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  // make this pretty\r\n  if (authUser.profileIMG !== \"\")\r\n    return (\r\n      <Container flexdirection=\"column\">\r\n        <h1>You're all set!</h1>\r\n      </Container>\r\n    );\r\n\r\n  return (\r\n    <Container flexdirection=\"column\">\r\n      <div>\r\n        <h1>Next Steps</h1>\r\n        <p>\r\n          Now that you've accepted to join UPE, you will continue on with the\r\n          onboarding period, during this time, and has mentioned during the Info\r\n          Sessions, you will be required to attend chapter, meet current\r\n          members, and contribute in some way to UPE. Further details about this\r\n          will be given to you shortly by our Recruitment Team.\r\n        </p>\r\n        <p>\r\n          For the time being however, we ask that you fill out the form bellow,\r\n          so that once onboarding is over, we can induct you and add you to our\r\n          database & website in a timely manner.\r\n        </p>\r\n      </div>\r\n      <br />\r\n      <h2> Data Form </h2>\r\n      <DataForm\r\n        submitFunction={submitData}\r\n        firstName={authUser.name.split(\" \")[0]}\r\n      />\r\n    </Container>\r\n  );\r\n};\r\n\r\nconst DataForm = ({ submitFunction, firstName }) => {\r\n  const [formData, setFormData] = useState({\r\n    file: null,\r\n    profileIMG: \"\",\r\n    twitter: \"\",\r\n    facebook: \"\",\r\n    github: \"\",\r\n    linkedin: \"\",\r\n  });\r\n  const [validated, setValidated] = useState(false);\r\n\r\n  const setFileValidity = (fileUpload) => {\r\n    if (fileUpload.files.length === 0) {\r\n      fileUpload.setCustomValidity(\"You must upload a file!\");\r\n      swal(\"Uh oh!\", \"You must upload a file!\", \"error\");\r\n    } else if (fileUpload.files.length > 1) {\r\n      fileUpload.setCustomValidity(\"You can only upload 1 file!\");\r\n      swal(\"Uh oh!\", \"You can only upload 1 file!\", \"error\");\r\n    } else if (fileUpload.files[0].size > 1048576 * 5) {\r\n      fileUpload.setCustomValidity(\"Max file size is 5MB!\");\r\n      fileUpload.value = \"\";\r\n      swal(\"Uh oh!\", \"Max file size is 5MB!\", \"error\");\r\n    } else {\r\n      fileUpload.setCustomValidity(\"\");\r\n    }\r\n  };\r\n\r\n  const saveData = (e) => {\r\n    e.preventDefault();\r\n    const form = e.currentTarget;\r\n    const fileUploads = Array.from(form.querySelectorAll(\".form-control-file\"));\r\n    fileUploads.forEach((fileUpload) => setFileValidity(fileUpload));\r\n    if (form.checkValidity() === false) {\r\n      e.stopPropagation();\r\n      setValidated(true);\r\n      swal(\r\n        \"Missing photo!\",\r\n        \"Please provide a headshot for your profile photo.\",\r\n        \"error\"\r\n      );\r\n    } else {\r\n      submitFunction(cloneDeep(formData));\r\n      setValidated(false);\r\n    }\r\n  };\r\n\r\n  const updateField = (e) =>\r\n    setFormData(\r\n      update(formData, {\r\n        [e.target.name]: { $set: e.target.value },\r\n      })\r\n    );\r\n\r\n  const updateImage = (e) => {\r\n    const hasIMG = e.target.files.length === 1;\r\n    let fileName = \"\";\r\n    // TODO: Needs refactor after website\r\n    if (hasIMG) {\r\n      if (e.target.files[0].type.split(\"/\")[1] === \"jpeg\")\r\n        fileName = firstName + \".jpg\";\r\n      else fileName = firstName + \".png\";\r\n    } else return;\r\n\r\n    setFormData(\r\n      update(formData, {\r\n        file: { $set: hasIMG ? e.target.files[0] : \"\" },\r\n        profileIMG: {\r\n          $set: fileName,\r\n        },\r\n      })\r\n    );\r\n  };\r\n\r\n  // TODO: Look into custom form issue\r\n  return (\r\n    <Container flexdirection=\"column\">\r\n      <Form noValidate validated={validated} onSubmit={saveData}>\r\n        <Form.Row>\r\n          <Form.Group>\r\n            <Form.Label>\r\n              <h5>\r\n                Profile Image <RequiredAsterisk />\r\n              </h5>\r\n            </Form.Label>\r\n            <Form.File\r\n              name=\"profileIMG\"\r\n              accept=\".png,.jpg\"\r\n              onChange={updateImage}\r\n              required\r\n            />\r\n          </Form.Group>\r\n        </Form.Row>\r\n\r\n        <Form.Row>\r\n          <Form.Group>\r\n            <Form.Label>\r\n              <h5>Twitter</h5>\r\n            </Form.Label>\r\n            <Form.Control\r\n              name=\"twitter\"\r\n              type=\"url\"\r\n              placeholder=\"https://twitter.com/...\"\r\n              value={formData.twitter}\r\n              onChange={updateField}\r\n            />\r\n          </Form.Group>\r\n        </Form.Row>\r\n\r\n        <Form.Row>\r\n          <Form.Group>\r\n            <Form.Label>\r\n              <h5>\r\n                Github <RequiredAsterisk />\r\n              </h5>\r\n            </Form.Label>\r\n            <Form.Control\r\n              name=\"github\"\r\n              type=\"url\"\r\n              placeholder=\"https://github.com/...\"\r\n              value={formData.github}\r\n              onChange={updateField}\r\n              required\r\n            />\r\n          </Form.Group>\r\n        </Form.Row>\r\n\r\n        <Form.Row>\r\n          <Form.Group>\r\n            <Form.Label>\r\n              <h5>Facebook</h5>\r\n            </Form.Label>\r\n            <Form.Control\r\n              name=\"facebook\"\r\n              type=\"url\"\r\n              placeholder=\"https://facebook.com/...\"\r\n              value={formData.facebook}\r\n              onChange={updateField}\r\n            />\r\n          </Form.Group>\r\n        </Form.Row>\r\n\r\n        <Form.Row>\r\n          <Form.Group>\r\n            <Form.Label>\r\n              <h5>\r\n                Linkedin <RequiredAsterisk />\r\n              </h5>\r\n            </Form.Label>\r\n            <Form.Control\r\n              name=\"linkedin\"\r\n              type=\"url\"\r\n              placeholder=\"https://linkedin.com/...\"\r\n              value={formData.linkedin}\r\n              onChange={updateField}\r\n              required\r\n            />\r\n          </Form.Group>\r\n        </Form.Row>\r\n\r\n        <Button type=\"submit\">Submit</Button>\r\n      </Form>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default compose(\r\n  withAuthorization(isApplicant),\r\n  withFirebase\r\n)(ApplicantView);\r\n","import React, { useContext } from \"react\";\r\n\r\nimport { isMember } from \"../util/conditions\";\r\nimport { AuthUserContext } from \"upe-react-components\";\r\nimport { InterviewerView, ApplicantView } from \"../components/Deliberation\";\r\n\r\nexport default () => {\r\n  const authUser = useContext(AuthUserContext);\r\n  return isMember(authUser) ? <InterviewerView /> : <ApplicantView />;\r\n};\r\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport classNames from 'classnames';\nimport React from 'react';\nimport { useBootstrapPrefix } from './ThemeProvider';\nvar Table = React.forwardRef(function (_ref, ref) {\n  var bsPrefix = _ref.bsPrefix,\n      className = _ref.className,\n      striped = _ref.striped,\n      bordered = _ref.bordered,\n      borderless = _ref.borderless,\n      hover = _ref.hover,\n      size = _ref.size,\n      variant = _ref.variant,\n      responsive = _ref.responsive,\n      props = _objectWithoutPropertiesLoose(_ref, [\"bsPrefix\", \"className\", \"striped\", \"bordered\", \"borderless\", \"hover\", \"size\", \"variant\", \"responsive\"]);\n\n  var decoratedBsPrefix = useBootstrapPrefix(bsPrefix, 'table');\n  var classes = classNames(className, decoratedBsPrefix, variant && decoratedBsPrefix + \"-\" + variant, size && decoratedBsPrefix + \"-\" + size, striped && decoratedBsPrefix + \"-striped\", bordered && decoratedBsPrefix + \"-bordered\", borderless && decoratedBsPrefix + \"-borderless\", hover && decoratedBsPrefix + \"-hover\");\n  var table = /*#__PURE__*/React.createElement(\"table\", _extends({}, props, {\n    className: classes,\n    ref: ref\n  }));\n\n  if (responsive) {\n    var responsiveClass = decoratedBsPrefix + \"-responsive\";\n\n    if (typeof responsive === 'string') {\n      responsiveClass = responsiveClass + \"-\" + responsive;\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: responsiveClass\n    }, table);\n  }\n\n  return table;\n});\nexport default Table;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nfunction stringifiable(obj) {\n  // Safely stringify Object.create(null)\n\n  /* istanbul ignore next */\n  return typeof obj === 'object' && !('toString' in obj) ? Object.prototype.toString.call(obj).slice(8, -1) : obj;\n}\n\nvar isProduction = typeof process === 'object' && process.env.NODE_ENV === 'production';\n\nfunction invariant(condition, message) {\n  if (!condition) {\n    /* istanbul ignore next */\n    if (isProduction) {\n      throw new Error('Invariant failed');\n    }\n\n    throw new Error(message());\n  }\n}\n\nexports.invariant = invariant;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar splice = Array.prototype.splice;\nvar toString = Object.prototype.toString;\n\nfunction type(obj) {\n  return toString.call(obj).slice(8, -1);\n}\n\nvar assign = Object.assign ||\n/* istanbul ignore next */\nfunction (target, source) {\n  getAllKeys(source).forEach(function (key) {\n    if (hasOwnProperty.call(source, key)) {\n      target[key] = source[key];\n    }\n  });\n  return target;\n};\n\nvar getAllKeys = typeof Object.getOwnPropertySymbols === 'function' ? function (obj) {\n  return Object.keys(obj).concat(Object.getOwnPropertySymbols(obj));\n}\n/* istanbul ignore next */\n: function (obj) {\n  return Object.keys(obj);\n};\n\nfunction copy(object) {\n  return Array.isArray(object) ? assign(object.constructor(object.length), object) : type(object) === 'Map' ? new Map(object) : type(object) === 'Set' ? new Set(object) : object && typeof object === 'object' ? assign(Object.create(Object.getPrototypeOf(object)), object)\n  /* istanbul ignore next */\n  : object;\n}\n\nvar Context =\n/** @class */\nfunction () {\n  function Context() {\n    this.commands = assign({}, defaultCommands);\n    this.update = this.update.bind(this); // Deprecated: update.extend, update.isEquals and update.newContext\n\n    this.update.extend = this.extend = this.extend.bind(this);\n\n    this.update.isEquals = function (x, y) {\n      return x === y;\n    };\n\n    this.update.newContext = function () {\n      return new Context().update;\n    };\n  }\n\n  Object.defineProperty(Context.prototype, \"isEquals\", {\n    get: function get() {\n      return this.update.isEquals;\n    },\n    set: function set(value) {\n      this.update.isEquals = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  Context.prototype.extend = function (directive, fn) {\n    this.commands[directive] = fn;\n  };\n\n  Context.prototype.update = function (object, $spec) {\n    var _this = this;\n\n    var spec = typeof $spec === 'function' ? {\n      $apply: $spec\n    } : $spec;\n\n    if (!(Array.isArray(object) && Array.isArray(spec))) {\n      invariant(!Array.isArray(spec), function () {\n        return \"update(): You provided an invalid spec to update(). The spec may \" + \"not contain an array except as the value of $set, $push, $unshift, \" + \"$splice or any custom command allowing an array value.\";\n      });\n    }\n\n    invariant(typeof spec === 'object' && spec !== null, function () {\n      return \"update(): You provided an invalid spec to update(). The spec and \" + \"every included key path must be plain objects containing one of the \" + (\"following commands: \" + Object.keys(_this.commands).join(', ') + \".\");\n    });\n    var nextObject = object;\n    getAllKeys(spec).forEach(function (key) {\n      if (hasOwnProperty.call(_this.commands, key)) {\n        var objectWasNextObject = object === nextObject;\n        nextObject = _this.commands[key](spec[key], nextObject, spec, object);\n\n        if (objectWasNextObject && _this.isEquals(nextObject, object)) {\n          nextObject = object;\n        }\n      } else {\n        var nextValueForKey = type(object) === 'Map' ? _this.update(object.get(key), spec[key]) : _this.update(object[key], spec[key]);\n        var nextObjectValue = type(nextObject) === 'Map' ? nextObject.get(key) : nextObject[key];\n\n        if (!_this.isEquals(nextValueForKey, nextObjectValue) || typeof nextValueForKey === 'undefined' && !hasOwnProperty.call(object, key)) {\n          if (nextObject === object) {\n            nextObject = copy(object);\n          }\n\n          if (type(nextObject) === 'Map') {\n            nextObject.set(key, nextValueForKey);\n          } else {\n            nextObject[key] = nextValueForKey;\n          }\n        }\n      }\n    });\n    return nextObject;\n  };\n\n  return Context;\n}();\n\nexports.Context = Context;\nvar defaultCommands = {\n  $push: function $push(value, nextObject, spec) {\n    invariantPushAndUnshift(nextObject, spec, '$push');\n    return value.length ? nextObject.concat(value) : nextObject;\n  },\n  $unshift: function $unshift(value, nextObject, spec) {\n    invariantPushAndUnshift(nextObject, spec, '$unshift');\n    return value.length ? value.concat(nextObject) : nextObject;\n  },\n  $splice: function $splice(value, nextObject, spec, originalObject) {\n    invariantSplices(nextObject, spec);\n    value.forEach(function (args) {\n      invariantSplice(args);\n\n      if (nextObject === originalObject && args.length) {\n        nextObject = copy(originalObject);\n      }\n\n      splice.apply(nextObject, args);\n    });\n    return nextObject;\n  },\n  $set: function $set(value, _nextObject, spec) {\n    invariantSet(spec);\n    return value;\n  },\n  $toggle: function $toggle(targets, nextObject) {\n    invariantSpecArray(targets, '$toggle');\n    var nextObjectCopy = targets.length ? copy(nextObject) : nextObject;\n    targets.forEach(function (target) {\n      nextObjectCopy[target] = !nextObject[target];\n    });\n    return nextObjectCopy;\n  },\n  $unset: function $unset(value, nextObject, _spec, originalObject) {\n    invariantSpecArray(value, '$unset');\n    value.forEach(function (key) {\n      if (Object.hasOwnProperty.call(nextObject, key)) {\n        if (nextObject === originalObject) {\n          nextObject = copy(originalObject);\n        }\n\n        delete nextObject[key];\n      }\n    });\n    return nextObject;\n  },\n  $add: function $add(values, nextObject, _spec, originalObject) {\n    invariantMapOrSet(nextObject, '$add');\n    invariantSpecArray(values, '$add');\n\n    if (type(nextObject) === 'Map') {\n      values.forEach(function (_a) {\n        var key = _a[0],\n            value = _a[1];\n\n        if (nextObject === originalObject && nextObject.get(key) !== value) {\n          nextObject = copy(originalObject);\n        }\n\n        nextObject.set(key, value);\n      });\n    } else {\n      values.forEach(function (value) {\n        if (nextObject === originalObject && !nextObject.has(value)) {\n          nextObject = copy(originalObject);\n        }\n\n        nextObject.add(value);\n      });\n    }\n\n    return nextObject;\n  },\n  $remove: function $remove(value, nextObject, _spec, originalObject) {\n    invariantMapOrSet(nextObject, '$remove');\n    invariantSpecArray(value, '$remove');\n    value.forEach(function (key) {\n      if (nextObject === originalObject && nextObject.has(key)) {\n        nextObject = copy(originalObject);\n      }\n\n      nextObject.delete(key);\n    });\n    return nextObject;\n  },\n  $merge: function $merge(value, nextObject, _spec, originalObject) {\n    invariantMerge(nextObject, value);\n    getAllKeys(value).forEach(function (key) {\n      if (value[key] !== nextObject[key]) {\n        if (nextObject === originalObject) {\n          nextObject = copy(originalObject);\n        }\n\n        nextObject[key] = value[key];\n      }\n    });\n    return nextObject;\n  },\n  $apply: function $apply(value, original) {\n    invariantApply(value);\n    return value(original);\n  }\n};\nvar defaultContext = new Context();\nexports.isEquals = defaultContext.update.isEquals;\nexports.extend = defaultContext.extend;\nexports.default = defaultContext.update; // @ts-ignore\n\nexports.default.default = module.exports = assign(exports.default, exports); // invariants\n\nfunction invariantPushAndUnshift(value, spec, command) {\n  invariant(Array.isArray(value), function () {\n    return \"update(): expected target of \" + stringifiable(command) + \" to be an array; got \" + stringifiable(value) + \".\";\n  });\n  invariantSpecArray(spec[command], command);\n}\n\nfunction invariantSpecArray(spec, command) {\n  invariant(Array.isArray(spec), function () {\n    return \"update(): expected spec of \" + stringifiable(command) + \" to be an array; got \" + stringifiable(spec) + \". \" + \"Did you forget to wrap your parameter in an array?\";\n  });\n}\n\nfunction invariantSplices(value, spec) {\n  invariant(Array.isArray(value), function () {\n    return \"Expected $splice target to be an array; got \" + stringifiable(value);\n  });\n  invariantSplice(spec.$splice);\n}\n\nfunction invariantSplice(value) {\n  invariant(Array.isArray(value), function () {\n    return \"update(): expected spec of $splice to be an array of arrays; got \" + stringifiable(value) + \". \" + \"Did you forget to wrap your parameters in an array?\";\n  });\n}\n\nfunction invariantApply(fn) {\n  invariant(typeof fn === 'function', function () {\n    return \"update(): expected spec of $apply to be a function; got \" + stringifiable(fn) + \".\";\n  });\n}\n\nfunction invariantSet(spec) {\n  invariant(Object.keys(spec).length === 1, function () {\n    return \"Cannot have more than one key in an object with $set\";\n  });\n}\n\nfunction invariantMerge(target, specValue) {\n  invariant(specValue && typeof specValue === 'object', function () {\n    return \"update(): $merge expects a spec of type 'object'; got \" + stringifiable(specValue);\n  });\n  invariant(target && typeof target === 'object', function () {\n    return \"update(): $merge expects a target of type 'object'; got \" + stringifiable(target);\n  });\n}\n\nfunction invariantMapOrSet(target, command) {\n  var typeOfTarget = type(target);\n  invariant(typeOfTarget === 'Map' || typeOfTarget === 'Set', function () {\n    return \"update(): \" + stringifiable(command) + \" expects a target of type Set or Map; got \" + stringifiable(typeOfTarget);\n  });\n}","import React from \"react\";\r\nimport { Container } from \"../styles/global\";\r\n\r\n// TODO: use this\r\nconst Error = ({ message }) => (\r\n  <Container flexdirection=\"column\">\r\n    <h1>{message}</h1>\r\n  </Container>\r\n);\r\n\r\nexport default Error;\r\n"],"sourceRoot":""}