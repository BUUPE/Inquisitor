{"version":3,"sources":["webpack:///./node_modules/gatsby/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack:///./src/components/ApplicationForm.js","webpack:///./src/components/Loader.js","webpack:///./src/pages/apply.js"],"names":["asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","value","error","done","Promise","then","_asyncToGenerator","fn","self","this","args","arguments","apply","err","undefined","RequiredAsterisk","styled","span","CenteredForm","Form","setFileValidity","fileUpload","files","length","setCustomValidity","ApplicationForm","state","applicationFormConfig","loading","validated","sending","submitted","errorMsg","loadApplicationFormConfig","doc","props","firebase","get","exists","setState","data","componentDidMount","window","bsCustomFileInput","init","componentDidUpdate","prevProps","render","onSubmit","event","preventDefault","form","currentTarget","querySelector","checkValidity","stopPropagation","inputs","querySelectorAll","console","log","successMessage","flexdirection","style","alignSelf","size","noValidate","questions","sort","a","b","order","map","question","disabled","questionComponent","type","Control","required","as","rows","File","id","label","custom","accept","onChange","e","target","Row","width","Group","controlId","Label","name","renderQuestion","React","Component","withFirebase","Wrapper","div","Spinner","Loader","ApplyPage"],"mappings":"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","file":"component---src-pages-apply-js-90e05ba642f7d114a435.js","sourcesContent":["function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","import React from \"react\";\nimport styled from \"styled-components\";\n\nimport Form from \"react-bootstrap/Form\";\nimport Button from \"react-bootstrap/Button\";\n\nimport { withFirebase } from \"./Firebase\";\nimport Loader from \"./Loader\";\nimport Logo from \"./Logo\";\nimport { Container } from \"../styles/global\";\n\nexport const RequiredAsterisk = styled.span`\n  color: red;\n\n  &:after {\n    content: \"*\";\n  }\n`;\n\nconst CenteredForm = styled(Form)`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  max-width: 500px;\n  margin: 0 auto;\n  margin-bottom: 25px;\n`;\n\nconst setFileValidity = (fileUpload) => {\n  if (fileUpload.files.length === 0) {\n    fileUpload.setCustomValidity(\"You must upload a file!\");\n  } else if (fileUpload.files.length > 1) {\n    fileUpload.setCustomValidity(\"You can only upload 1 file!\");\n  } else {\n    fileUpload.setCustomValidity(\"\");\n  }\n};\n\nconst renderQuestion = (question, disabled = false) => {\n  let questionComponent;\n  if (question.type === \"textarea\") {\n    questionComponent = (\n      <Form.Control\n        required={question.required}\n        as=\"textarea\"\n        rows=\"3\"\n        disabled={disabled}\n      />\n    );\n  } else if (question.type === \"file\") {\n    questionComponent = (\n      <Form.File\n        id={`custom-file-${question.id}`}\n        label=\"Upload file\"\n        custom\n        accept=\".pdf\"\n        onChange={(e) => setFileValidity(e.target)}\n      />\n    );\n  } else {\n    questionComponent = (\n      <Form.Control\n        required={question.required}\n        type={question.type}\n        disabled={disabled}\n      />\n    );\n  }\n\n  return (\n    <Form.Row style={{ width: \"100%\" }} key={question.id}>\n      <Form.Group controlId={question.id} style={{ width: \"100%\" }}>\n        <Form.Label>\n          {question.name} {question.required && <RequiredAsterisk />}\n        </Form.Label>\n        {questionComponent}\n      </Form.Group>\n    </Form.Row>\n  );\n};\n\nclass ApplicationForm extends React.Component {\n  state = {\n    applicationFormConfig: null,\n    loading: true,\n    validated: false,\n    sending: false,\n    submitted: false,\n    errorMsg: \"\",\n  };\n\n  loadApplicationFormConfig = async () => {\n    const doc = await this.props.firebase.applicationFormConfig().get();\n\n    if (!doc.exists) {\n      this.setState({\n        errorMsg:\n          'Document \"applicationFormConfig\" does not exist! Please inform an administrator.',\n        loading: false,\n      });\n    } else {\n      this.setState({\n        applicationFormConfig: doc.data(),\n        loading: false,\n      });\n    }\n  };\n\n  componentDidMount() {\n    if (typeof window !== \"undefined\") {\n      import(\"bs-custom-file-input\").then((bsCustomFileInput) => {\n        bsCustomFileInput.init();\n      });\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.firebase !== null) {\n      this.loadApplicationFormConfig();\n    }\n  }\n\n  render() {\n    const {\n      loading,\n      errorMsg,\n      submitted,\n      validated,\n      applicationFormConfig,\n      sending,\n    } = this.state;\n\n    if (loading) return <Loader />;\n\n    const onSubmit = async (event) => {\n      this.setState({ sending: true });\n      event.preventDefault();\n      const form = event.currentTarget;\n      const fileUpload = form.querySelector(\".custom-file-input\");\n      setFileValidity(fileUpload);\n\n      if (form.checkValidity() === false) {\n        event.stopPropagation();\n      } else {\n        const inputs = form.querySelectorAll(\".form-control\");\n\n        console.log(inputs);\n        console.log(fileUpload);\n        // save to firebase\n\n        this.setState({ submitted: true });\n      }\n\n      this.setState({\n        sending: false,\n        validated: true,\n      });\n    };\n\n    const successMessage = (\n      <Container flexdirection=\"column\">\n        <div style={{ alignSelf: \"center\" }}>\n          <Logo size=\"medium\" />\n        </div>\n\n        <h1>Application Submitted!</h1>\n        <p>\n          Thank you for applying to join BU UPE. Please check your email for a\n          confirmation of your submission. Further details, such as interview\n          timeslots, will be prompted via email and can be entered in this\n          application. If you'd like to edit your submission, simply refresh\n          this page and re-apply.\n        </p>\n      </Container>\n    );\n\n    if (errorMsg)\n      return (\n        <Container flexdirection=\"column\">\n          <h1>Uh oh!</h1>\n          <p>{errorMsg}</p>\n        </Container>\n      );\n\n    if (submitted) return successMessage;\n\n    // use auth user context here, if user has already applied dont let them apply again (alternatively, just let them know they've applied already and further applications will overwrite previous ones)\n    return (\n      <Container flexdirection=\"column\">\n        <CenteredForm noValidate validated={validated} onSubmit={onSubmit}>\n          <Logo size=\"medium\" />\n          <h1>Apply to BU UPE</h1>\n          {/* maybe this message here should be configurable as well? */}\n          <p>\n            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras\n            fringilla, dui vitae maximus luctus, magna urna convallis purus,\n            condimentum ullamcorper velit dui eu dolor. Pellentesque et\n            tincidunt tellus. Fusce venenatis magna sed elit bibendum, sed\n            scelerisque augue placerat. Vestibulum nec mi efficitur, posuere\n            nisl at, pretium ex. Quisque quam dui, pulvinar a pellentesque eu,\n            cursus et elit. Ut volutpat imperdiet ex, id commodo nulla pretium\n            id. Proin accumsan dignissim tortor, id pulvinar urna euismod ac.\n            Morbi suscipit massa id dui feugiat ultrices. Nulla ac faucibus\n            tortor, quis pharetra leo.\n          </p>\n\n          {applicationFormConfig.questions\n            .sort((a, b) => (a.order > b.order ? 1 : -1))\n            .map((question) => renderQuestion(question))}\n\n          <Button type=\"submit\" disabled={sending}>\n            Submit\n          </Button>\n        </CenteredForm>\n      </Container>\n    );\n  }\n}\n\nexport default withFirebase(ApplicationForm);\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nconst Wrapper = styled.div`\n  width: 100%;\n  height: 100%;\n  background: white;\n  z-index: 10;\n  position: fixed;\n  top: 0;\n  left: 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`;\n\nconst Spinner = styled.div`\n  display: inline-block;\n  width: 64px;\n  height: 64px;\n\n  @keyframes lds-dual-ring {\n    0% {\n      transform: rotate(0deg);\n    }\n    100% {\n      transform: rotate(360deg);\n    }\n  }\n\n  &:after {\n    content: \" \";\n    display: block;\n    width: 46px;\n    height: 46px;\n    margin: 1px;\n    border-radius: 50%;\n    border: 5px solid #333;\n    border-color: #333 transparent #333 transparent;\n    animation: lds-dual-ring 1.2s linear infinite;\n  }\n`;\n\nconst Loader = () => (\n  <Wrapper>\n    <Spinner />\n  </Wrapper>\n);\n\nexport default Loader;\n","import React from \"react\";\n\nimport Layout from \"../components/Layout\";\nimport ApplicationForm from \"../components/ApplicationForm\";\n\n// check if application form is open, otherwise show message\nconst ApplyPage = () => (\n  <Layout>\n    <ApplicationForm />\n  </Layout>\n);\n\nexport default ApplyPage;\n"],"sourceRoot":""}