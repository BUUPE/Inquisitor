{"version":3,"sources":["webpack:///./src/pages/apply.js"],"names":["CenteredForm","styled","Form","setFileValidity","fileUpload","files","length","setCustomValidity","swal","size","value","ApplicationForm","_initFirebase","state","applicationFormConfig","initialApplicationData","generalSettings","loading","validated","sending","submitted","alreadyApplied","errorMsg","loadData","a","loadApplicationFormConfig","props","firebase","get","then","snapshot","data","catch","setState","loadUserData","user","context","uid","console","error","loadGeneralSettings","loadUserApplication","application","exists","Promise","all","values","roles","hasOwnProperty","componentDidMount","this","componentDidUpdate","prevProps","window","bsCustomFileInput","init","render","applicationsOpen","flexdirection","style","justifyContent","alignItems","maxWidth","semester","href","onSubmit","event","preventDefault","form","currentTarget","fileUploads","Array","from","querySelectorAll","forEach","checkValidity","stopPropagation","inputs","radios","filter","r","checked","questions","applicant","responses","map","inputId","id","parseInt","firstName","split","email","find","q","name","order","type","radioResponses","inputValue","uploadFiles","resolve","reject","pop","file","put","ref","getDownloadURL","fileURLs","concat","uploadApplicationData","set","deliberation","accepted","confirmed","feedback","votes","interview","interviewed","updateRoles","update","sendReceipt","sendApplicationReceipt","successMessage","alignSelf","title","route","noValidate","color","sort","b","question","questionComponent","defaultValue","Control","required","as","rows","File","label","custom","accept","onChange","e","target","Check","inline","defaultChecked","Row","width","key","Group","controlId","Label","renderQuestion","disabled","Component","contextType","AuthUserContext","compose","withAuthorization","isLoggedIn","withFirebase"],"mappings":"kUAoBMA,EAAeC,kBAAOC,KAAV,0EAAGD,CAAH,yGASZE,EAAkB,SAACC,GACS,IAA5BA,EAAWC,MAAMC,QACnBF,EAAWG,kBAAkB,2BAC7BC,IAAK,SAAU,0BAA2B,UACjCJ,EAAWC,MAAMC,OAAS,GACnCF,EAAWG,kBAAkB,+BAC7BC,IAAK,SAAU,8BAA+B,UACrCJ,EAAWC,MAAM,GAAGI,KAAO,SACpCL,EAAWG,kBAAkB,yBAC7BH,EAAWM,MAAQ,GACnBF,IAAK,SAAU,wBAAyB,UAExCJ,EAAWG,kBAAkB,KAI3BI,E,oJACJC,eAAgB,E,EAChBC,MAAQ,CACNC,sBAAuB,KACvBC,uBAAwB,KACxBC,gBAAiB,KACjBC,SAAS,EACTC,WAAW,EACXC,SAAS,EACTC,WAAW,EACXC,gBAAgB,EAChBC,SAAU,I,EAiBZC,S,sBAAW,kCAAAC,EAAA,sDACT,EAAKZ,eAAgB,EACfa,EAA4B,EAAKC,MAAMC,SAC1Cb,wBACAc,MACAC,MAAK,SAACC,GAAD,OAAcA,EAASC,UAC5BC,OAAM,kBACL,EAAKC,SAAS,CACZX,SAAU,yCACVL,SAAS,OAGTiB,EAAe,EAAKR,MAAMC,SAC7BQ,KAAK,EAAKC,QAAQC,KAClBT,MACAC,MAAK,SAACC,GAAD,OAAcA,EAASC,UAC5BC,MAAMM,QAAQC,OACXC,EAAsB,EAAKd,MAAMC,SACpCX,kBACAY,MACAC,MAAK,SAACC,GAAD,OAAcA,EAASC,UAC5BC,OAAM,kBACL,EAAKC,SAAS,CACZX,SAAU,kCACVL,SAAS,OAGTwB,EAAsB,EAAKf,MAAMC,SACpCe,YAAY,EAAKN,QAAQC,KACzBT,MACAC,MAAK,SAACC,GAAD,OAAeA,EAASa,OAASb,EAASC,OAAS,QACxDC,MAAMM,QAAQC,OAEjBK,QAAQC,IAAI,CACVpB,EACAS,EACAM,EACAC,IACCZ,MAAK,SAACiB,GAAD,OACN,EAAKb,SAAS,CACZhB,SAAS,EACTH,sBAAuBgC,EAAO,GAC9BzB,eAAgByB,EAAO,GAAGC,MAAMC,eAAe,aAC/ChC,gBAAiB8B,EAAO,GACxB/B,uBAAwB+B,EAAO,QA5C1B,2C,8CAbXG,kBAAA,WACMC,KAAKxB,MAAMC,WAAauB,KAAKtC,eAAesC,KAAK3B,Y,EAGvD4B,mBAAA,SAAmBC,GACbF,KAAKxB,MAAMC,WAAauB,KAAKtC,eAAesC,KAAK3B,WAC/B,oBAAX8B,QACT,qCAA+BxB,MAAK,SAACyB,GACnCA,EAAkBC,W,EAsDxBC,OAAA,WAAU,IAAD,SAUHN,KAAKrC,MARPI,EAFK,EAELA,QACAK,EAHK,EAGLA,SACAF,EAJK,EAILA,UACAF,EALK,EAKLA,UACAJ,EANK,EAMLA,sBACAK,EAPK,EAOLA,QACAE,EARK,EAQLA,eACAL,EATK,EASLA,gBAGF,GAAIC,EAAS,OAAO,kBAAC,IAAD,MAEpB,IAAKD,EAAgByC,iBACnB,OACE,kBAAC,IAAD,CACEC,cAAc,SACdC,MAAO,CACLC,eAAgB,SAChBC,WAAY,SACZC,SAAU,MAGZ,kBAAC,IAAD,CAAMrD,KAAK,WACX,wDACA,oEACyC,IACtCK,EAAsBiD,SAFzB,6LAK2B,IACzB,uBAAGC,KAAK,6BAAR,gBANF,MAWN,IAAMC,EAAQ,uCAAG,WAAOC,GAAP,mDAAA1C,EAAA,yDACf0C,EAAMC,iBACDnD,EAAgByC,iBAFN,uBAGbjD,IACE,SACA,kIACA,SANW,6BAWT4D,EAAOF,EAAMG,eACbC,EAAcC,MAAMC,KACxBJ,EAAKK,iBAAiB,wBAEZC,SAAQ,SAACtE,GAAD,OAAgBD,EAAgBC,OAEvB,IAAzBgE,EAAKO,gBAjBM,iBAkBbT,EAAMU,kBAlBO,+BAoBb,EAAK3C,SAAS,CAAEd,SAAS,IACnB0D,EAASN,MAAMC,KAAKJ,EAAKK,iBAAiB,kBAC1CK,EAASP,MAAMC,KACnBJ,EAAKK,iBAAiB,wCACtBM,QAAO,SAACC,GAAD,OAAOA,EAAEC,WAxBL,EAyBmB,EAAKpE,MAAMC,sBAAnCiD,EAzBK,EAyBLA,SAAUmB,EAzBL,EAyBKA,UAzBL,EA0BU,EAAK9C,QAApBC,EA1BK,EA0BLA,KAAKU,EA1BA,EA0BAA,OACPoC,WAAY,EAGdC,EAAYP,EAAOQ,KAAI,YAA6B,IAAtBC,EAAqB,EAAzBC,GAAa7E,EAAY,EAAZA,MACnC6E,EAAKC,SAASF,GAET,IAAPC,EAAUE,EAAY/E,EAAMgF,MAAM,KAAK,GAC3B,IAAPH,IAAUI,EAAQjF,GAJ0B,MAMvBwE,EAAUU,MAAK,SAACC,GAAD,OAAOA,EAAEN,KAAOA,KAArDO,EAN6C,EAM7CA,KAAMC,EANuC,EAMvCA,MAAOC,EANgC,EAMhCA,KACrB,MAAO,CACLT,KACA7E,QACAoF,OACAC,QACAC,WAIEC,EAAiBnB,EAAOO,KAC5B,YAA2C,IAAlCC,EAAiC,EAAvCQ,KAAsBI,EAAiB,EAAxBxF,MACV6E,EAAKC,SAASF,GAEd5E,EAAsB,QAAdwF,EAH0B,EAIVhB,EAAUU,MAAK,SAACC,GAAD,OAAOA,EAAEN,KAAOA,KAArDO,EAJgC,EAIhCA,KAAMC,EAJ0B,EAI1BA,MAAOC,EAJmB,EAInBA,KACrB,MAAO,CACLT,KACA7E,QACAoF,OACAC,QACAC,WAKAG,EAAc7B,EAAYe,KAC9B,SAACjF,GAAD,OACE,IAAIwC,SAAQ,SAACwD,EAASC,GACpB,IAAMd,EAAKC,SAASpF,EAAWmF,GAAGG,MAAM,KAAKY,OAC7C,EAAK5E,MAAMC,SACR4E,KAAKlE,EAAKkD,GACViB,IAAIpG,EAAWC,MAAM,IACrBwB,MAAK,SAACC,GAAD,OAAcA,EAAS2E,IAAIC,oBAChC7E,MAAK,SAACnB,GAAW,IAAD,EACewE,EAAUU,MACtC,SAACC,GAAD,OAAOA,EAAEN,KAAOA,KADVO,EADO,EACPA,KAAMC,EADC,EACDA,MAAOC,EADN,EACMA,KAGrB,OAAOI,EAAQ,CACbb,KACA7E,QACAoF,OACAC,QACAC,kBA/EC,UAqFUpD,QAAQC,IAAIsD,GArFtB,eAqFPQ,EArFO,OAsFbvB,EAAYA,EAAUwB,OAAOD,GAAUC,OAAOX,GAExCY,EAAwB,EAAKnF,MAAMC,SAASe,YAAYL,GAAKyE,IAAI,CACrE1B,YACArB,WACAgD,aAAc,CACZC,UAAU,EACVC,WAAW,EACXC,SAAU,GACVC,MAAO,IAETC,UAAW,CACTC,aAAa,KAGXC,EAAc,EAAK5F,MAAMC,SAASQ,KAAKE,GAAKkF,OAAO,CACvDxE,UAEIyE,EAAc,EAAK9F,MAAMC,SAAS8F,uBAAuB,CAC7D9B,QACAF,cA1GW,UA6GP7C,QAAQC,IAAI,CAACgE,EAAuBS,EAAaE,IA7G1C,QA8Gb,EAAKvF,SAAS,CAAEb,WAAW,EAAMD,SAAS,IA9G7B,QAiHf,EAAKc,SAAS,CACZf,WAAW,IAlHE,4CAAH,sDAsHRwG,EACJ,kBAAC,IAAD,CAAWhE,cAAc,UACvB,yBAAKC,MAAO,CAAEgE,UAAW,WACvB,kBAAC,IAAD,CAAMlH,KAAK,YAGb,sDACA,oUAUJ,GAAIa,EACF,OACE,kBAAC,IAAD,CAAWoC,cAAc,UACvB,sCACA,2BAAIpC,IAIV,GAAIF,EAAW,OAAOsG,EAsFtB,OACE,oCACE,kBAAC,IAAD,CAAKE,MAAM,QAAQC,MAAM,WACzB,kBAAC,IAAD,CAAWnE,cAAc,MAAMC,MAAO,CAAEC,eAAgB,WACtD,kBAAC5D,EAAD,CAAc8H,YAAU,EAAC5G,UAAWA,EAAW+C,SAAUA,GACvD,kBAAC,IAAD,CAAMxD,KAAK,WACX,+CAgBCY,GACC,uBAAGsC,MAAO,CAAEoE,MAAO,QAAnB,gIAODjH,EAAsBoE,UACpB8C,MAAK,SAACxG,EAAGyG,GAAJ,OAAWzG,EAAEuE,MAAQkC,EAAElC,MAAQ,GAAK,KACzCV,KAAI,SAAC6C,GAAD,OApHQ,SAACA,GAAc,IAUhCC,EATIpH,EAA2B,EAAKF,MAAhCE,uBACJqH,EAAe,GASnB,OAR+B,OAA3BrH,EACFqH,EAAerH,EAAuBqE,UAAUQ,MAC9C,SAACZ,GAAD,OAAOA,EAAEO,KAAO2C,EAAS3C,MACzB7E,MACuB,IAAhBwH,EAAS3C,GAAU6C,EAAe,EAAKhG,QAAQ0D,KACjC,IAAhBoC,EAAS3C,KAAU6C,EAAe,EAAKhG,QAAQuD,OAGhDuC,EAASlC,MACf,IAAK,WACHmC,EACE,kBAAC,IAAKE,QAAN,CACEC,SAAUJ,EAASI,SACnBC,GAAG,WACHC,KAAK,IACLJ,aAAcA,IAGlB,MACF,IAAK,OACHD,EACE,kBAAC,IAAKM,KAAN,CACElD,GAAE,eAAiB2C,EAAS3C,GAC5BmD,MAAM,cACNC,QAAM,EACNC,OAAO,OACPC,SAAU,SAACC,GAAD,OAAO3I,EAAgB2I,EAAEC,WAGvC,MACF,IAAK,QACHZ,EACE,6BACE,kBAAC,IAAKa,MAAN,CACEL,QAAM,EACNL,SAAUJ,EAASI,SACnBW,QAAM,EACNC,eAAgBd,EAChB1H,MAAM,OACNgI,MAAM,MACN1C,KAAK,QACLF,KAAMoC,EAAS3C,GACfA,GAAO2C,EAAS3C,GAAd,OAEJ,kBAAC,IAAKyD,MAAN,CACEL,QAAM,EACNL,SAAUJ,EAASI,SACnBW,QAAM,EACNC,gBAAiBd,EACjB1H,MAAM,QACNgI,MAAM,KACN1C,KAAK,QACLF,KAAMoC,EAAS3C,GACfA,GAAO2C,EAAS3C,GAAd,QAIR,MACF,QACE4C,EACE,kBAAC,IAAKE,QAAN,CACEC,SAAUJ,EAASI,SACnBtC,KAAMkC,EAASlC,KACfoC,aAAcA,IAMtB,OACE,kBAAC,IAAKe,IAAN,CAAUxF,MAAO,CAAEyF,MAAO,QAAUC,IAAKnB,EAAS3C,IAChD,kBAAC,IAAK+D,MAAN,CAAYC,UAAWrB,EAAS3C,GAAI5B,MAAO,CAAEyF,MAAO,SAClD,kBAAC,IAAKI,MAAN,KACGtB,EAASpC,KADZ,IACmBoC,EAASI,UAAY,kBAAC,IAAD,OAEvCH,IAsCoBsB,CAAevB,MAEpC,kBAAC,IAAD,CAAQlC,KAAK,SAAS0D,SAAUvI,GAC7BA,EAAU,gBAAkB,c,GA1XbwI,aAAxBhJ,EAaGiJ,YAAcC,kBAsXRC,sBACbC,4BAAkBC,KAClBC,eAFaH,CAGbnJ","file":"component---src-pages-apply-js-5e8dcf067a8e49648c3d.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { compose } from \"recompose\";\r\nimport swal from \"@sweetalert/with-react\";\r\n\r\nimport Form from \"react-bootstrap/Form\";\r\nimport Button from \"react-bootstrap/Button\";\r\n\r\nimport {\r\n  AuthUserContext,\r\n  withFirebase,\r\n  withAuthorization,\r\n} from \"upe-react-components\";\r\n\r\nimport { isLoggedIn } from \"../util/conditions\";\r\nimport Loader from \"../components/Loader\";\r\nimport Logo from \"../components/Logo\";\r\nimport SEO from \"../components/SEO\";\r\nimport { Container, RequiredAsterisk } from \"../styles/global\";\r\n\r\nconst CenteredForm = styled(Form)`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  max-width: 500px;\r\n  flex: auto;\r\n  margin-bottom: 25px;\r\n`;\r\n\r\nconst setFileValidity = (fileUpload) => {\r\n  if (fileUpload.files.length === 0) {\r\n    fileUpload.setCustomValidity(\"You must upload a file!\");\r\n    swal(\"Uh oh!\", \"You must upload a file!\", \"error\");\r\n  } else if (fileUpload.files.length > 1) {\r\n    fileUpload.setCustomValidity(\"You can only upload 1 file!\");\r\n    swal(\"Uh oh!\", \"You can only upload 1 file!\", \"error\");\r\n  } else if (fileUpload.files[0].size > 1048576) {\r\n    fileUpload.setCustomValidity(\"Max file size is 1MB!\");\r\n    fileUpload.value = \"\";\r\n    swal(\"Uh oh!\", \"Max file size is 1MB!\", \"error\");\r\n  } else {\r\n    fileUpload.setCustomValidity(\"\");\r\n  }\r\n};\r\n\r\nclass ApplicationForm extends Component {\r\n  _initFirebase = false;\r\n  state = {\r\n    applicationFormConfig: null,\r\n    initialApplicationData: null,\r\n    generalSettings: null,\r\n    loading: true,\r\n    validated: false,\r\n    sending: false,\r\n    submitted: false,\r\n    alreadyApplied: false,\r\n    errorMsg: \"\",\r\n  };\r\n  static contextType = AuthUserContext;\r\n\r\n  componentDidMount() {\r\n    if (this.props.firebase && !this._initFirebase) this.loadData();\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (this.props.firebase && !this._initFirebase) this.loadData();\r\n    if (typeof window !== \"undefined\") {\r\n      import(\"bs-custom-file-input\").then((bsCustomFileInput) => {\r\n        bsCustomFileInput.init();\r\n      });\r\n    }\r\n  }\r\n\r\n  loadData = async () => {\r\n    this._initFirebase = true;\r\n    const loadApplicationFormConfig = this.props.firebase\r\n      .applicationFormConfig()\r\n      .get()\r\n      .then((snapshot) => snapshot.data())\r\n      .catch(() =>\r\n        this.setState({\r\n          errorMsg: \"Application Form Config doesn't exist!\",\r\n          loading: false,\r\n        })\r\n      );\r\n    const loadUserData = this.props.firebase\r\n      .user(this.context.uid)\r\n      .get()\r\n      .then((snapshot) => snapshot.data())\r\n      .catch(console.error);\r\n    const loadGeneralSettings = this.props.firebase\r\n      .generalSettings()\r\n      .get()\r\n      .then((snapshot) => snapshot.data())\r\n      .catch(() =>\r\n        this.setState({\r\n          errorMsg: \"General settings doesn't exist!\",\r\n          loading: false,\r\n        })\r\n      );\r\n    const loadUserApplication = this.props.firebase\r\n      .application(this.context.uid)\r\n      .get()\r\n      .then((snapshot) => (snapshot.exists ? snapshot.data() : null))\r\n      .catch(console.error);\r\n\r\n    Promise.all([\r\n      loadApplicationFormConfig,\r\n      loadUserData,\r\n      loadGeneralSettings,\r\n      loadUserApplication,\r\n    ]).then((values) =>\r\n      this.setState({\r\n        loading: false,\r\n        applicationFormConfig: values[0],\r\n        alreadyApplied: values[1].roles.hasOwnProperty(\"applicant\"),\r\n        generalSettings: values[2],\r\n        initialApplicationData: values[3],\r\n      })\r\n    );\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      loading,\r\n      errorMsg,\r\n      submitted,\r\n      validated,\r\n      applicationFormConfig,\r\n      sending,\r\n      alreadyApplied,\r\n      generalSettings,\r\n    } = this.state;\r\n\r\n    if (loading) return <Loader />;\r\n\r\n    if (!generalSettings.applicationsOpen)\r\n      return (\r\n        <Container\r\n          flexdirection=\"column\"\r\n          style={{\r\n            justifyContent: \"center\",\r\n            alignItems: \"center\",\r\n            maxWidth: 700,\r\n          }}\r\n        >\r\n          <Logo size=\"medium\" />\r\n          <h1>Applications are closed!</h1>\r\n          <p>\r\n            Unfortunately, the application for the{\" \"}\r\n            {applicationFormConfig.semester} season has closed. If you're\r\n            interesting in joining BU UPE, please come back next semester and\r\n            apply, we'd love to have you! In the meantime, feel free to check\r\n            out the public events on{\" \"}\r\n            <a href=\"https://upe.bu.edu/events\">our calendar</a>.\r\n          </p>\r\n        </Container>\r\n      );\r\n\r\n    const onSubmit = async (event) => {\r\n      event.preventDefault();\r\n      if (!generalSettings.applicationsOpen) {\r\n        swal(\r\n          \"Uh oh!\",\r\n          \"Applications are closed! Not sure how you got here, but unfortunately we can't submit this for you as applications have closed.\",\r\n          \"error\"\r\n        );\r\n        return;\r\n      }\r\n\r\n      const form = event.currentTarget;\r\n      const fileUploads = Array.from(\r\n        form.querySelectorAll(\".custom-file-input\")\r\n      );\r\n      fileUploads.forEach((fileUpload) => setFileValidity(fileUpload));\r\n\r\n      if (form.checkValidity() === false) {\r\n        event.stopPropagation();\r\n      } else {\r\n        this.setState({ sending: true });\r\n        const inputs = Array.from(form.querySelectorAll(\".form-control\"));\r\n        const radios = Array.from(\r\n          form.querySelectorAll(\".custom-radio>.custom-control-input\")\r\n        ).filter((r) => r.checked);\r\n        const { semester, questions } = this.state.applicationFormConfig;\r\n        const { uid, roles } = this.context;\r\n        roles.applicant = true;\r\n\r\n        let firstName, email;\r\n        let responses = inputs.map(({ id: inputId, value }) => {\r\n          const id = parseInt(inputId);\r\n\r\n          if (id === 1) firstName = value.split(\" \")[0];\r\n          else if (id === 2) email = value;\r\n\r\n          const { name, order, type } = questions.find((q) => q.id === id);\r\n          return {\r\n            id,\r\n            value,\r\n            name,\r\n            order,\r\n            type,\r\n          };\r\n        });\r\n\r\n        const radioResponses = radios.map(\r\n          ({ name: inputId, value: inputValue }) => {\r\n            const id = parseInt(inputId);\r\n            // eslint-disable-next-line eqeqeq\r\n            const value = inputValue == \"true\";\r\n            const { name, order, type } = questions.find((q) => q.id === id);\r\n            return {\r\n              id,\r\n              value,\r\n              name,\r\n              order,\r\n              type,\r\n            };\r\n          }\r\n        );\r\n\r\n        const uploadFiles = fileUploads.map(\r\n          (fileUpload) =>\r\n            new Promise((resolve, reject) => {\r\n              const id = parseInt(fileUpload.id.split(\"-\").pop());\r\n              this.props.firebase\r\n                .file(uid, id)\r\n                .put(fileUpload.files[0])\r\n                .then((snapshot) => snapshot.ref.getDownloadURL())\r\n                .then((value) => {\r\n                  const { name, order, type } = questions.find(\r\n                    (q) => q.id === id\r\n                  );\r\n                  return resolve({\r\n                    id,\r\n                    value,\r\n                    name,\r\n                    order,\r\n                    type,\r\n                  });\r\n                });\r\n            })\r\n        );\r\n\r\n        const fileURLs = await Promise.all(uploadFiles);\r\n        responses = responses.concat(fileURLs).concat(radioResponses);\r\n\r\n        const uploadApplicationData = this.props.firebase.application(uid).set({\r\n          responses,\r\n          semester,\r\n          deliberation: {\r\n            accepted: false,\r\n            confirmed: false,\r\n            feedback: \"\",\r\n            votes: {},\r\n          },\r\n          interview: {\r\n            interviewed: false,\r\n          },\r\n        });\r\n        const updateRoles = this.props.firebase.user(uid).update({\r\n          roles,\r\n        });\r\n        const sendReceipt = this.props.firebase.sendApplicationReceipt({\r\n          email,\r\n          firstName,\r\n        });\r\n\r\n        await Promise.all([uploadApplicationData, updateRoles, sendReceipt]);\r\n        this.setState({ submitted: true, sending: false });\r\n      }\r\n\r\n      this.setState({\r\n        validated: true,\r\n      });\r\n    };\r\n\r\n    const successMessage = (\r\n      <Container flexdirection=\"column\">\r\n        <div style={{ alignSelf: \"center\" }}>\r\n          <Logo size=\"medium\" />\r\n        </div>\r\n\r\n        <h1>Application Submitted!</h1>\r\n        <p>\r\n          Thank you for applying to join BU UPE. Please check your email for a\r\n          confirmation of your submission. Further details, such as interview\r\n          timeslots, will be prompted via email and can be entered in this\r\n          application. If you'd like to edit your submission, simply refresh\r\n          this page and re-apply.\r\n        </p>\r\n      </Container>\r\n    );\r\n\r\n    if (errorMsg)\r\n      return (\r\n        <Container flexdirection=\"column\">\r\n          <h1>Uh oh!</h1>\r\n          <p>{errorMsg}</p>\r\n        </Container>\r\n      );\r\n\r\n    if (submitted) return successMessage;\r\n\r\n    const renderQuestion = (question) => {\r\n      const { initialApplicationData } = this.state;\r\n      let defaultValue = \"\";\r\n      if (initialApplicationData !== null) {\r\n        defaultValue = initialApplicationData.responses.find(\r\n          (r) => r.id === question.id\r\n        ).value;\r\n      } else if (question.id === 1) defaultValue = this.context.name;\r\n      else if (question.id === 2) defaultValue = this.context.email;\r\n\r\n      let questionComponent;\r\n      switch (question.type) {\r\n        case \"textarea\":\r\n          questionComponent = (\r\n            <Form.Control\r\n              required={question.required}\r\n              as=\"textarea\"\r\n              rows=\"3\"\r\n              defaultValue={defaultValue}\r\n            />\r\n          );\r\n          break;\r\n        case \"file\":\r\n          questionComponent = (\r\n            <Form.File\r\n              id={`custom-file-${question.id}`}\r\n              label=\"Upload file\"\r\n              custom\r\n              accept=\".pdf\"\r\n              onChange={(e) => setFileValidity(e.target)}\r\n            />\r\n          );\r\n          break;\r\n        case \"yesno\":\r\n          questionComponent = (\r\n            <div>\r\n              <Form.Check\r\n                custom\r\n                required={question.required}\r\n                inline\r\n                defaultChecked={defaultValue}\r\n                value=\"true\"\r\n                label=\"Yes\"\r\n                type=\"radio\"\r\n                name={question.id}\r\n                id={`${question.id}-1`}\r\n              />\r\n              <Form.Check\r\n                custom\r\n                required={question.required}\r\n                inline\r\n                defaultChecked={!defaultValue}\r\n                value=\"false\"\r\n                label=\"No\"\r\n                type=\"radio\"\r\n                name={question.id}\r\n                id={`${question.id}-2`}\r\n              />\r\n            </div>\r\n          );\r\n          break;\r\n        default:\r\n          questionComponent = (\r\n            <Form.Control\r\n              required={question.required}\r\n              type={question.type}\r\n              defaultValue={defaultValue}\r\n            />\r\n          );\r\n          break;\r\n      }\r\n\r\n      return (\r\n        <Form.Row style={{ width: \"100%\" }} key={question.id}>\r\n          <Form.Group controlId={question.id} style={{ width: \"100%\" }}>\r\n            <Form.Label>\r\n              {question.name} {question.required && <RequiredAsterisk />}\r\n            </Form.Label>\r\n            {questionComponent}\r\n          </Form.Group>\r\n        </Form.Row>\r\n      );\r\n    };\r\n\r\n    return (\r\n      <>\r\n        <SEO title=\"Apply\" route=\"/apply\" />\r\n        <Container flexdirection=\"row\" style={{ justifyContent: \"center\" }}>\r\n          <CenteredForm noValidate validated={validated} onSubmit={onSubmit}>\r\n            <Logo size=\"medium\" />\r\n            <h1>Apply to BU UPE</h1>\r\n            {/* Pre application welcome message, perhaps make this configurable in admin settings\r\n          <p>\r\n            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras\r\n            fringilla, dui vitae maximus luctus, magna urna convallis purus,\r\n            condimentum ullamcorper velit dui eu dolor. Pellentesque et\r\n            tincidunt tellus. Fusce venenatis magna sed elit bibendum, sed\r\n            scelerisque augue placerat. Vestibulum nec mi efficitur, posuere\r\n            nisl at, pretium ex. Quisque quam dui, pulvinar a pellentesque eu,\r\n            cursus et elit. Ut volutpat imperdiet ex, id commodo nulla pretium\r\n            id. Proin accumsan dignissim tortor, id pulvinar urna euismod ac.\r\n            Morbi suscipit massa id dui feugiat ultrices. Nulla ac faucibus\r\n            tortor, quis pharetra leo.\r\n          </p>\r\n          */}\r\n\r\n            {alreadyApplied && (\r\n              <p style={{ color: \"red\" }}>\r\n                Look's like you've already applied! Feel free to reapply\r\n                however, just note that it will overwrite your previous\r\n                submission.\r\n              </p>\r\n            )}\r\n\r\n            {applicationFormConfig.questions\r\n              .sort((a, b) => (a.order > b.order ? 1 : -1))\r\n              .map((question) => renderQuestion(question))}\r\n\r\n            <Button type=\"submit\" disabled={sending}>\r\n              {sending ? \"Submitting...\" : \"Submit\"}\r\n            </Button>\r\n          </CenteredForm>\r\n        </Container>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default compose(\r\n  withAuthorization(isLoggedIn),\r\n  withFirebase\r\n)(ApplicationForm);\r\n"],"sourceRoot":""}