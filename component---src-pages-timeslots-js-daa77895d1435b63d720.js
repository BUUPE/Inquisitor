(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{"/GqU":function(t,e,n){var r=n("RK3t"),o=n("HYAF");t.exports=function(t){return r(o(t))}},"/b8u":function(t,e,n){var r=n("STAE");t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},"0BK2":function(t,e){t.exports={}},"0Dky":function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},"0GbY":function(t,e,n){var r=n("Qo9l"),o=n("2oRo"),i=function(t){return"function"==typeof t?t:void 0};t.exports=function(t,e){return arguments.length<2?i(r[t])||i(o[t]):r[t]&&r[t][e]||o[t]&&o[t][e]}},"0eef":function(t,e,n){"use strict";var r={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,i=o&&!r.call({1:2},1);e.f=i?function(t){var e=o(this,t);return!!e&&e.enumerable}:r},"2oRo":function(t,e,n){(function(e){var n=function(t){return t&&t.Math==Math&&t};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof e&&e)||Function("return this")()}).call(this,n("eKGF"))},"33Wh":function(t,e,n){var r=n("yoRg"),o=n("eDl+");t.exports=Object.keys||function(t){return r(t,o)}},"6JNq":function(t,e,n){var r=n("UTVS"),o=n("Vu81"),i=n("Bs8V"),u=n("m/L8");t.exports=function(t,e){for(var n=o(e),a=u.f,c=i.f,f=0;f<n.length;f++){var l=n[f];r(t,l)||a(t,l,c(e,l))}}},"6LWA":function(t,e,n){var r=n("xrYK");t.exports=Array.isArray||function(t){return"Array"==r(t)}},"93I0":function(t,e,n){var r=n("VpIT"),o=n("kOOl"),i=r("keys");t.exports=function(t){return i[t]||(i[t]=o(t))}},A2ZE:function(t,e,n){var r=n("HAuM");t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}}},BIHw:function(t,e,n){"use strict";var r=n("I+eb"),o=n("or9q"),i=n("ewvW"),u=n("UMSQ"),a=n("ppGB"),c=n("ZfDv");r({target:"Array",proto:!0},{flat:function(){var t=arguments.length?arguments[0]:void 0,e=i(this),n=u(e.length),r=c(e,0);return r.length=o(r,e,e,n,0,void 0===t?1:a(t)),r}})},Bs8V:function(t,e,n){var r=n("g6v/"),o=n("0eef"),i=n("XGwC"),u=n("/GqU"),a=n("wE6v"),c=n("UTVS"),f=n("DPsx"),l=Object.getOwnPropertyDescriptor;e.f=r?l:function(t,e){if(t=u(t),e=a(e,!0),f)try{return l(t,e)}catch(n){}if(c(t,e))return i(!o.f.call(t,e),t[e])}},DPsx:function(t,e,n){var r=n("g6v/"),o=n("0Dky"),i=n("zBJ4");t.exports=!r&&!o((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},"G+Rx":function(t,e,n){var r=n("0GbY");t.exports=r("document","documentElement")},HAuM:function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},HYAF:function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t}},"I+eb":function(t,e,n){var r=n("2oRo"),o=n("Bs8V").f,i=n("kRJp"),u=n("busE"),a=n("zk60"),c=n("6JNq"),f=n("lMq5");t.exports=function(t,e){var n,l,s,p,v,y=t.target,m=t.global,d=t.stat;if(n=m?r:d?r[y]||a(y,{}):(r[y]||{}).prototype)for(l in e){if(p=e[l],s=t.noTargetGet?(v=o(n,l))&&v.value:n[l],!f(m?l:y+(d?".":"#")+l,t.forced)&&void 0!==s){if(typeof p==typeof s)continue;c(p,s)}(t.sham||s&&s.sham)&&i(p,"sham",!0),u(n,l,p,t)}}},I8vh:function(t,e,n){var r=n("ppGB"),o=Math.max,i=Math.min;t.exports=function(t,e){var n=r(t);return n<0?o(n+e,0):i(n,e)}},JBy8:function(t,e,n){var r=n("yoRg"),o=n("eDl+").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},"N+g0":function(t,e,n){var r=n("g6v/"),o=n("m/L8"),i=n("glrk"),u=n("33Wh");t.exports=r?Object.defineProperties:function(t,e){i(t);for(var n,r=u(e),a=r.length,c=0;a>c;)o.f(t,n=r[c++],e[n]);return t}},QGkA:function(t,e,n){n("RNIs")("flat")},Qo9l:function(t,e,n){var r=n("2oRo");t.exports=r},RK3t:function(t,e,n){var r=n("0Dky"),o=n("xrYK"),i="".split;t.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==o(t)?i.call(t,""):Object(t)}:Object},RNIs:function(t,e,n){var r=n("tiKp"),o=n("fHMY"),i=n("m/L8"),u=r("unscopables"),a=Array.prototype;null==a[u]&&i.f(a,u,{configurable:!0,value:o(null)}),t.exports=function(t){a[u][t]=!0}},STAE:function(t,e,n){var r=n("0Dky");t.exports=!!Object.getOwnPropertySymbols&&!r((function(){return!String(Symbol())}))},TWQb:function(t,e,n){var r=n("/GqU"),o=n("UMSQ"),i=n("I8vh"),u=function(t){return function(e,n,u){var a,c=r(e),f=o(c.length),l=i(u,f);if(t&&n!=n){for(;f>l;)if((a=c[l++])!=a)return!0}else for(;f>l;l++)if((t||l in c)&&c[l]===n)return t||l||0;return!t&&-1}};t.exports={includes:u(!0),indexOf:u(!1)}},UMSQ:function(t,e,n){var r=n("ppGB"),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0}},UTVS:function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},VpIT:function(t,e,n){var r=n("xDBR"),o=n("xs3f");(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.6.5",mode:r?"pure":"global",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"})},Vu81:function(t,e,n){var r=n("0GbY"),o=n("JBy8"),i=n("dBg+"),u=n("glrk");t.exports=r("Reflect","ownKeys")||function(t){var e=o.f(u(t)),n=i.f;return n?e.concat(n(t)):e}},XGwC:function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},XIxq:function(t,e,n){"use strict";n.r(e);n("BIHw"),n("QGkA");var r=n("/S4K"),o=n("q1tI"),i=n.n(o),u=n("eHHv"),a=n("3Z9Z"),c=n("cWnB"),f=n("JeC3"),l=n("CCtv"),s=n("puyr"),p=n("7oih"),v=n("kT3S"),y=n("JI6e"),m=function(t){var e=t.date,n=t.timeslotLength,r=t.sendToParent,u=t.initialTimeslots,a=Object(o.useState)({}),c=a[0],l=a[1],s=Object(o.useState)(!1),p=s[0],v=s[1],m=Array.from(Array(56),(function(t,e){return 15*e})),d=n/15;Object(o.useEffect)((function(){if(u){console.log("Received",u);var t=Object.assign({},c);u.forEach((function(e){for(var r=60*(e.time.getHours()-8)+e.time.getMinutes(),o=r+n-15,i=r;i<=o;i+=15)t[i]=[r,o]})),l(t)}}),[u]);var g=function(t){var n=8+Math.floor(t/60),r=t%60;return new Date(e.getFullYear(),e.getMonth(),e.getDate(),n,r)},h=function(t){var e=t.getHours()%12;return 0===e&&(e=12),(e=e.toString().padStart(2,"0"))+":"+t.getMinutes().toString().padStart(2,"0")+" "+(t.getHours()>=12?"PM":"AM")},b=function(t,e){if(c.hasOwnProperty(t)){for(var r=Object.assign({},c),o=r[t][0],i=r[t][1],u=o;u<=i;u+=15)delete r[u];return l(r)}if(function(t,e){if(e+d>m.length)return!1;for(var r=t+n,o=t;o<r;o+=15)if(c.hasOwnProperty(o))return!1;return!0}(t,e)){for(var a=Object.assign({},c),f=t+n-15,s=t;s<=f;s+=15)a[s]=[t,f];return l(a)}v(!0)};return Object(o.useEffect)((function(){return r(e.toDateString(),Array.from(new Set(Object.values(c).map((function(t){return t[0]})))).map((function(t){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),8+Math.floor(t/60),t%60)})))}),[c]),i.a.createElement(y.a,{style:{width:300,flex:"none"}},i.a.createElement("div",{style:{position:"fixed"}},i.a.createElement(f.a,{onClose:function(){return v(!1)},show:p,delay:3e3,autohide:!0},i.a.createElement(f.a.Body,null,i.a.createElement("strong",{className:"mr-auto",style:{color:"red"}},"Invalid option/timeslot conflict!")))),i.a.createElement("strong",null,e.toDateString()),m.map((function(t,e){var n=function(t){var e=c.hasOwnProperty(t);return{isSelected:e,isTop:e&&t===c[t][0],isMiddle:e&&!c[t].includes(t),isBottom:e&&t===c[t][1]}},r=function(t){var e=n(t),r=e.isTop,o=e.isMiddle,i=e.isBottom;return Object.assign({},{padding:10,cursor:"pointer",display:"flex",justifyContent:"space-between"},{borderLeft:"1px solid black",borderRight:"1px solid black",borderTop:i||o?"none":"1px solid black",borderBottom:r||o?"none":"1px solid black",background:c.hasOwnProperty(t)?"green":"white"})},o=n(t),u=o.isSelected,a=o.isTop,f=o.isMiddle,l=o.isBottom,s=function(n){var o=n.children;return i.a.createElement("div",{style:Object.assign({},r(t)),onClick:function(){return b(t,e)}},o)};if(u){if(a)return i.a.createElement(s,{key:t},i.a.createElement("span",null,h(g(t))));if(f)return i.a.createElement(s,{key:t},"-");if(l)return i.a.createElement(s,{key:t},i.a.createElement("span",null,h(g(t+15))))}return i.a.createElement("div",{style:Object.assign({},r(t)),key:t,onClick:function(){return b(t,e)}},i.a.createElement("span",null,h(g(t))),i.a.createElement("span",null,"-"),i.a.createElement("span",null,h(g(t+15))))})))},d=n("lEpx"),g=Object(u.a)(Object(l.e)(l.c),s.c)((function(t){var e=t.firebase,n=Object(o.useState)(null),u=n[0],s=n[1],p=Object(o.useState)(!0),y=p[0],g=p[1],h=Object(o.useState)(null),b=h[0],x=h[1],O=Object(o.useState)(!1),S=O[0],w=O[1],E=Object(o.useState)({}),j=E[0],k=E[1],T=Object(o.useState)({}),D=T[0],M=T[1],R=Object(o.useContext)(l.a),A=Object(o.useRef)(null);if(Object(o.useEffect)((function(){var t=function(){var t=Object(r.a)((function*(){var t=yield e.generalSettings().get();if(t.exists){var n=t.data();n.timeslotDays=n.timeslotDays.map((function(t){return t.toDate()})),s(n)}else x("Failed to load timeslots!");g(!1)}));return function(){return t.apply(this,arguments)}}();if(e){t();var n=e.timeslots().onSnapshot((function(t){var e={};t.docs.map((function(t){return Object.assign({},t.data(),{time:t.data().time.toDate()})})).forEach((function(t){var n=t.time.toDateString();e.hasOwnProperty(n)?e[n].push(t):e[n]=[t]})),M(e)}),console.error);return function(){return n()}}}),[e]),y)return i.a.createElement(v.a,null);if(b)return i.a.createElement(d.b,{flexdirection:"column"},i.a.createElement("h1",null,b));var B=u.timeslotsOpen,P=u.timeslotsOpenForApplicants,I=u.timeslotLength,L=u.timeslotDays;if(!B)return i.a.createElement(d.b,{flexdirection:"column"},i.a.createElement("h1",null,"Timeslot selection is closed!"));if(R.roles.applicant&&!P)return i.a.createElement(d.b,{flexdirection:"column"},i.a.createElement("h1",null,"Timeslot selection isn't open yet!"));var G,V,C=!1,J=function(){var t=Object(r.a)((function*(){var t=yield e.timeslots().get().then((function(t){return t.docs.map((function(t){return Object.assign({},t.data(),{time:t.data().time.toDate(),id:t.id})}))})),n=Object.values(j).flat(),o={};n.forEach((function(t,e){return o[t]=e})),t.filter((function(t){return t.interviewers.hasOwnProperty(R.uid)})).forEach((function(t,n){if(!o.hasOwnProperty(t.time)){var r=(void 0)[n],i=r.id;delete r.id,delete r.interviewers[R.uid],e.timeslot(i).update(r)}}),t);var i=function(){var t=Object(r.a)((function*(t,e){for(var n=0;n<t.length;n++)yield e(t[n],n,t)}));return function(e,n){return t.apply(this,arguments)}}();yield i(n,function(){var n=Object(r.a)((function*(n){var o=t.filter((function(t){return t.time.getTime()===n.getTime()})),a=!1;if(yield i(o,function(){var t=Object(r.a)((function*(t){try{yield e.firestoreRoot.runTransaction(function(){var n=Object(r.a)((function*(n){if(!a){var r=yield n.get(e.timeslot(t.id)),o=Object.assign({},r.data());Object.keys(o.interviewers).length<2&&(o.interviewers[R.uid]=!0,n.update(e.timeslot(t.id),o),a=!0)}}));return function(t){return n.apply(this,arguments)}}())}catch(n){console.error("Transaction failure!",n)}}));return function(e){return t.apply(this,arguments)}}()),!a){var c={};c[R.uid]=!0,e.timeslots().add({time:n,interviewers:c,timeslotLength:u.timeslotLength})}}));return function(t){return n.apply(this,arguments)}}()),w(!0)}));return function(){return t.apply(this,arguments)}}(),U=function(t,e){var n=Object.assign({},j);n[t]=e,k(n)};return i.a.createElement(d.b,{flexdirection:"column"},i.a.createElement("h1",null,"Interviewer Timeslot Selection"),i.a.createElement(a.a,{style:{flexWrap:"unset",overflowX:"auto",justifyContent:"flex-start"},ref:A,onMouseDown:function(t){C=!0,G=t.pageX-A.current.offsetLeft,V=A.current.scrollLeft},onMouseLeave:function(t){C=!1},onMouseMove:function(t){if(C){t.preventDefault();var e=3*(t.pageX-A.current.offsetLeft-G);A.current.scrollLeft=V-e}},onMouseUp:function(t){C=!1}},L.map((function(t,e){return i.a.createElement(m,{key:e,date:t,timeslotLength:I,sendToParent:U,initialTimeslots:D[t.toDateString()]})}))),i.a.createElement("div",{style:{display:"flex",alignItems:"center"}},i.a.createElement(c.a,{style:{width:"fit-content",marginTop:20,marginBottom:20},onClick:J},"Save Selections"),i.a.createElement(f.a,{onClose:function(){return w(!1)},show:S,delay:3e3,autohide:!0,style:{width:"fit-content",height:"fit-content",marginLeft:25}},i.a.createElement(f.a.Header,null,i.a.createElement("strong",{className:"mr-auto"},"Selections Saved!")))))}));e.default=function(t){var e=t.location;return i.a.createElement(p.a,null,i.a.createElement(g,{location:e}))}},ZfDv:function(t,e,n){var r=n("hh1v"),o=n("6LWA"),i=n("tiKp")("species");t.exports=function(t,e){var n;return o(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!o(n.prototype)?r(n)&&null===(n=n[i])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)}},afO8:function(t,e,n){var r,o,i,u=n("f5p1"),a=n("2oRo"),c=n("hh1v"),f=n("kRJp"),l=n("UTVS"),s=n("93I0"),p=n("0BK2"),v=a.WeakMap;if(u){var y=new v,m=y.get,d=y.has,g=y.set;r=function(t,e){return g.call(y,t,e),e},o=function(t){return m.call(y,t)||{}},i=function(t){return d.call(y,t)}}else{var h=s("state");p[h]=!0,r=function(t,e){return f(t,h,e),e},o=function(t){return l(t,h)?t[h]:{}},i=function(t){return l(t,h)}}t.exports={set:r,get:o,has:i,enforce:function(t){return i(t)?o(t):r(t,{})},getterFor:function(t){return function(e){var n;if(!c(e)||(n=o(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}}},busE:function(t,e,n){var r=n("2oRo"),o=n("kRJp"),i=n("UTVS"),u=n("zk60"),a=n("iSVu"),c=n("afO8"),f=c.get,l=c.enforce,s=String(String).split("String");(t.exports=function(t,e,n,a){var c=!!a&&!!a.unsafe,f=!!a&&!!a.enumerable,p=!!a&&!!a.noTargetGet;"function"==typeof n&&("string"!=typeof e||i(n,"name")||o(n,"name",e),l(n).source=s.join("string"==typeof e?e:"")),t!==r?(c?!p&&t[e]&&(f=!0):delete t[e],f?t[e]=n:o(t,e,n)):f?t[e]=n:u(e,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&f(this).source||a(this)}))},"dBg+":function(t,e){e.f=Object.getOwnPropertySymbols},"eDl+":function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},ewvW:function(t,e,n){var r=n("HYAF");t.exports=function(t){return Object(r(t))}},f5p1:function(t,e,n){var r=n("2oRo"),o=n("iSVu"),i=r.WeakMap;t.exports="function"==typeof i&&/native code/.test(o(i))},fHMY:function(t,e,n){var r,o=n("glrk"),i=n("N+g0"),u=n("eDl+"),a=n("0BK2"),c=n("G+Rx"),f=n("zBJ4"),l=n("93I0"),s=l("IE_PROTO"),p=function(){},v=function(t){return"<script>"+t+"<\/script>"},y=function(){try{r=document.domain&&new ActiveXObject("htmlfile")}catch(o){}var t,e;y=r?function(t){t.write(v("")),t.close();var e=t.parentWindow.Object;return t=null,e}(r):((e=f("iframe")).style.display="none",c.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(v("document.F=Object")),t.close(),t.F);for(var n=u.length;n--;)delete y.prototype[u[n]];return y()};a[s]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(p.prototype=o(t),n=new p,p.prototype=null,n[s]=t):n=y(),void 0===e?n:i(n,e)}},"g6v/":function(t,e,n){var r=n("0Dky");t.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},glrk:function(t,e,n){var r=n("hh1v");t.exports=function(t){if(!r(t))throw TypeError(String(t)+" is not an object");return t}},hh1v:function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},iSVu:function(t,e,n){var r=n("xs3f"),o=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(t){return o.call(t)}),t.exports=r.inspectSource},kOOl:function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++n+r).toString(36)}},kRJp:function(t,e,n){var r=n("g6v/"),o=n("m/L8"),i=n("XGwC");t.exports=r?function(t,e,n){return o.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},lMq5:function(t,e,n){var r=n("0Dky"),o=/#|\.prototype\./,i=function(t,e){var n=a[u(t)];return n==f||n!=c&&("function"==typeof e?r(e):!!e)},u=i.normalize=function(t){return String(t).replace(o,".").toLowerCase()},a=i.data={},c=i.NATIVE="N",f=i.POLYFILL="P";t.exports=i},"m/L8":function(t,e,n){var r=n("g6v/"),o=n("DPsx"),i=n("glrk"),u=n("wE6v"),a=Object.defineProperty;e.f=r?a:function(t,e,n){if(i(t),e=u(e,!0),i(n),o)try{return a(t,e,n)}catch(r){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},or9q:function(t,e,n){"use strict";var r=n("6LWA"),o=n("UMSQ"),i=n("A2ZE"),u=function(t,e,n,a,c,f,l,s){for(var p,v=c,y=0,m=!!l&&i(l,s,3);y<a;){if(y in n){if(p=m?m(n[y],y,e):n[y],f>0&&r(p))v=u(t,e,p,o(p.length),v,f-1)-1;else{if(v>=9007199254740991)throw TypeError("Exceed the acceptable array length");t[v]=p}v++}y++}return v};t.exports=u},ppGB:function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},tiKp:function(t,e,n){var r=n("2oRo"),o=n("VpIT"),i=n("UTVS"),u=n("kOOl"),a=n("STAE"),c=n("/b8u"),f=o("wks"),l=r.Symbol,s=c?l:l&&l.withoutSetter||u;t.exports=function(t){return i(f,t)||(a&&i(l,t)?f[t]=l[t]:f[t]=s("Symbol."+t)),f[t]}},wE6v:function(t,e,n){var r=n("hh1v");t.exports=function(t,e){if(!r(t))return t;var n,o;if(e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;if("function"==typeof(n=t.valueOf)&&!r(o=n.call(t)))return o;if(!e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},xDBR:function(t,e){t.exports=!1},xrYK:function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},xs3f:function(t,e,n){var r=n("2oRo"),o=n("zk60"),i=r["__core-js_shared__"]||o("__core-js_shared__",{});t.exports=i},yoRg:function(t,e,n){var r=n("UTVS"),o=n("/GqU"),i=n("TWQb").indexOf,u=n("0BK2");t.exports=function(t,e){var n,a=o(t),c=0,f=[];for(n in a)!r(u,n)&&r(a,n)&&f.push(n);for(;e.length>c;)r(a,n=e[c++])&&(~i(f,n)||f.push(n));return f}},zBJ4:function(t,e,n){var r=n("2oRo"),o=n("hh1v"),i=r.document,u=o(i)&&o(i.createElement);t.exports=function(t){return u?i.createElement(t):{}}},zk60:function(t,e,n){var r=n("2oRo"),o=n("kRJp");t.exports=function(t,e){try{o(r,t,e)}catch(n){r[t]=e}return e}}}]);
//# sourceMappingURL=component---src-pages-timeslots-js-daa77895d1435b63d720.js.map