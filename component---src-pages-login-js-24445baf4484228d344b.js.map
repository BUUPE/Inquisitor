{"version":3,"sources":["webpack:///./src/pages/login.js"],"names":["withFirebase","firebase","useEffect","token","URLSearchParams","window","location","search","get","pathname","localStorage","getItem","removeItem","doSignInWithToken","then","navigate","catch","console","error","href","title","route","size"],"mappings":"4FAAA,4FAqCeA,kCA7BD,SAAC,GAAkB,IAAhBC,EAAe,EAAfA,SAkBf,OAjBAC,qBAAU,WACR,GAAID,EAAU,CACZ,IACME,EADY,IAAIC,gBAAgBC,OAAOC,SAASC,QAC9BC,IAAI,SAC5B,GAAIL,EAAO,CACT,IAAMM,EAAWJ,OAAOK,aAAaC,QAAQ,YAC7CN,OAAOK,aAAaE,WAAW,YAC/BX,EACGY,kBAAkBV,GAClBW,MAAK,kBAAMC,mBAASN,GAAsB,QAC1CO,MAAMC,QAAQC,YAEjBb,OAAOC,SAASa,KAAO,8CAG1B,CAAClB,IAGF,oCACE,kBAAC,IAAD,CAAKmB,MAAM,QAAQC,MAAM,WACzB,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAMC,KAAK,WACX","file":"component---src-pages-login-js-24445baf4484228d344b.js","sourcesContent":["import React, { useEffect } from \"react\";\r\nimport { navigate } from \"gatsby\";\r\n\r\nimport { withFirebase } from \"upe-react-components\";\r\nimport Logo from \"../components/Logo\";\r\nimport SEO from \"../components/SEO\";\r\nimport { Centered } from \"../styles/global\";\r\n\r\nconst Login = ({ firebase }) => {\r\n  useEffect(() => {\r\n    if (firebase) {\r\n      const urlParams = new URLSearchParams(window.location.search);\r\n      const token = urlParams.get(\"token\");\r\n      if (token) {\r\n        const pathname = window.localStorage.getItem(\"pathname\");\r\n        window.localStorage.removeItem(\"pathname\");\r\n        firebase\r\n          .doSignInWithToken(token)\r\n          .then(() => navigate(pathname ? pathname : \"/\"))\r\n          .catch(console.error);\r\n      } else {\r\n        window.location.href = \"https://upe-authenticator.herokuapp.com/\";\r\n      }\r\n    }\r\n  }, [firebase]);\r\n\r\n  return (\r\n    <>\r\n      <SEO title=\"Login\" route=\"/login\" />\r\n      <Centered>\r\n        <Logo size=\"medium\" />\r\n        <h1>Authenticating...</h1>\r\n      </Centered>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default withFirebase(Login);\r\n"],"sourceRoot":""}